<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The AI Disruption: Who's Really Winning and Losing</title>
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
            color: #2c3e50;
            line-height: 1.8;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: -20px -20px 30px -20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header h1 {
            margin: 0;
            font-size: 2.8em;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        .header p {
            margin: 15px auto 0;
            font-size: 1.3em;
            opacity: 0.95;
            max-width: 800px;
            line-height: 1.6;
        }
        .intro-section {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .intro-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 2em;
        }
        .big-idea {
            background: linear-gradient(135deg, #f5f7fa 0%, #f0f2ff 100%);
            border-left: 5px solid #667eea;
            padding: 25px;
            margin: 30px 0;
            border-radius: 8px;
            font-size: 1.2em;
        }
        .story-box {
            background: #fff8e1;
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .story-box h3 {
            color: #f57c00;
            margin-top: 0;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .tab {
            padding: 14px 28px;
            background: white;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            position: relative;
        }
        .tab:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tab.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        .tab-description {
            font-size: 0.85em;
            font-weight: normal;
            opacity: 0.8;
        }
        .content {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-height: 600px;
        }
        .plot-container {
            margin: 30px 0;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .explanation-box {
            background: #e3f2fd;
            border: 1px solid #64b5f6;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .explanation-box h4 {
            color: #1976d2;
            margin-top: 0;
        }
        .equation-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
            overflow-x: auto;
        }
        .equation-explanation {
            background: #e8eaf6;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
            font-size: 0.95em;
        }
        .real-world-example {
            background: #f3e5f5;
            border: 2px solid #ab47bc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .real-world-example h4 {
            color: #7b1fa2;
            margin-top: 0;
        }
        .interactive-guide {
            background: linear-gradient(45deg, #26a69a, #66bb6a);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .guide-button {
            background: white;
            color: #26a69a;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }
        .guide-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .metric-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-5px);
        }
        .metric-value {
            font-size: 2.5em;
            font-weight: 700;
            margin: 10px 0;
        }
        .metric-label {
            font-size: 1em;
            opacity: 0.9;
        }
        .metric-context {
            font-size: 0.9em;
            margin-top: 10px;
            opacity: 0.85;
        }
        .slider-container {
            margin: 25px 0;
            padding: 20px;
            background: #f5f7fa;
            border-radius: 8px;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .slider-description {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
        }
        input[type="range"] {
            width: 100%;
            margin: 10px 0;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        .insight-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .insight-box h4 {
            color: #856404;
            margin-top: 0;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 2px dotted #667eea;
            cursor: help;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        .faq-section {
            margin: 30px 0;
        }
        .faq-item {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .faq-item:hover {
            background: #e9ecef;
        }
        .faq-question {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 10px;
        }
        .faq-answer {
            display: none;
            padding-top: 10px;
        }
        .faq-item.active .faq-answer {
            display: block;
        }
        .tour-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: none;
            z-index: 1000;
        }
        .tour-popup {
            position: fixed;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 500px;
            z-index: 1001;
        }
        .tour-button {
            background: #667eea;
            color: white;
            padding: 10px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 5px;
        }
        .tour-button:hover {
            background: #5a67d8;
        }
        .hidden {
            display: none;
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e6ed;
        }
        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        tr:hover {
            background: #f8f9fa;
        }
        .share-section {
            background: #f0f4f8;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin: 30px 0;
        }
        .share-button {
            background: #667eea;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            margin: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .share-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>The AI Employment Catastrophe</h1>
            <p>67% Have Job Anxiety ‚Ä¢ 39% of Skills Obsolete by 2030 ‚Ä¢ No Safety Net Coming</p>
        </div>

        <!-- Welcome Section -->
        <div class="intro-section" id="welcomeSection">
            <h2>üéØ What's This About?</h2>
            <p>Imagine if tomorrow, every book, course, and piece of knowledge became completely free. Would everyone become equally educated? The empirical data from 2024-2025 reveals a harsh truth.</p>
            
            <div class="big-idea">
                <strong>The Reality:</strong> AI isn't creating a simple rich/poor divide. It's causing a mental health epidemic (67% job anxiety), geographic clustering (AI deserts forming), and permanent underclass formation. 230,831 tech workers laid off. Only 36.9% of AI-displaced workers find jobs within 3 months. The window is slamming shut.
            </div>

            <div class="story-box">
                <h3>üìñ The Real Story</h3>
                <p>The Prompt Engineering Bubble burst. What was hyped at 144 searches/million in 2023 crashed to 20-30. Agriculture surprised everyone - expecting automation, it's growing 30% by 2028. But the real shock: AI-displaced workers are 2x more likely to remain unemployed for over a year. Geographic AI clusters in Nashville, San Antonio, Las Vegas are thriving while rural "AI deserts" with 39% less broadband access fall permanently behind.</p>
            </div>

            <div class="interactive-guide">
                <h3>Ready to Understand Why?</h3>
                <p>Take a quick guided tour to see the data, or explore on your own</p>
                <button class="guide-button" onclick="startTour()">üöÄ Start Guided Tour (2 min)</button>
                <button class="guide-button" onclick="skipTour()">üìä Explore On My Own</button>
            </div>
            
            <div class="big-idea" style="margin-top: 30px; background: #ffebee; border-color: #f44336;">
                <strong>‚ö†Ô∏è The 2025 Reality Check:</strong>
                <ul style="margin: 10px 0;">
                    <li><strong>67%</strong> of workers have AI job anxiety (mental health crisis)</li>
                    <li><strong>17%</strong> success rate for government retraining (it's not working)</li>
                    <li><strong>2.5 years</strong> until your skills are obsolete (was 10-15)</li>
                    <li><strong>36.9%</strong> of AI-displaced workers find jobs in 3 months (vs 46.2% others)</li>
                    <li><strong>Zero</strong> federal protection coming (40 states, 40 different laws)</li>
                </ul>
            </div>
        </div>

        <div class="tabs hidden" id="mainTabs">
            <div class="tab active" onclick="showTab('story', event)">
                The Story
                <div class="tab-description">What's happening</div>
            </div>
            <div class="tab" onclick="showTab('see', event)">
                See It Happen
                <div class="tab-description">Live visualization</div>
            </div>
            <div class="tab" onclick="showTab('why', event)">
                Why It Happens
                <div class="tab-description">The factors</div>
            </div>
            <div class="tab" onclick="showTab('future', event)">
                Future Scenarios
                <div class="tab-description">What's coming</div>
            </div>
            <div class="tab" onclick="showTab('visualize3d', event)">
                3D Visualization
                <div class="tab-description">See the divide</div>
            </div>
            <div class="tab" onclick="showTab('reality', event)">
                The Reality
                <div class="tab-description">No easy fixes</div>
            </div>
            <div class="tab" onclick="showTab('details', event)">
                Technical Details
                <div class="tab-description">For researchers</div>
            </div>
        </div>

        <!-- The Story Tab -->
        <div id="story" class="content hidden">
            <h2>The Knowledge Gap Story</h2>
            
            <div class="metric-display">
                <div class="metric-card">
                    <div class="metric-label">Tech Layoffs 2024-25</div>
                    <div class="metric-value">230,831</div>
                    <div class="metric-context">136k (2024) + 94k (H1 2025)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Journalism Jobs Lost</div>
                    <div class="metric-value">2,700+</div>
                    <div class="metric-context">2.5 newspapers closing weekly</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Legal AI Adoption</div>
                    <div class="metric-value">19% ‚Üí 79%</div>
                    <div class="metric-context">In just one year (2023-24)</div>
                </div>
                <div class="metric-card pulse">
                    <div class="metric-label">Mental Health Crisis</div>
                    <div class="metric-value">67%</div>
                    <div class="metric-context">Workers with AI job anxiety</div>
                </div>
            </div>

            <h3>What the Data Actually Shows</h3>
            <p>Empirical data from BLS, World Economic Forum, industry reports, and verified studies (2024-2025) reveals:</p>
            
            <div class="insight-box">
                <h4>üí° Key Insight: The Skills Half-Life Collapse</h4>
                <p>Technical skills now obsolete in 2.2 years (was 2.5 in 2024, 10-15 historically). Degrees worthless before loans paid off. 12.6% of jobs (19M) at high risk - up from 10%. Government retraining programs: 15% success rate. Bootcamps: 67% placement but at 30% lower wages. Only apprenticeships work (68% success) but they're rare. 78% of firms using AI, 61% of adults.</p>
            </div>

            <h3>The Three Speed Limits</h3>
            <div class="real-world-example">
                <h4>üèÉ‚Äç‚ôÇÔ∏è The Geographic Clustering Effect</h4>
                <p><strong>AI Clusters:</strong> Nashville, San Antonio, Las Vegas - unexpected tech hubs emerging</p>
                <p><strong>AI Deserts:</strong> Rural areas with 39% less broadband - falling permanently behind</p>
                <p><strong>State Chaos:</strong> 40 states with different AI laws creating regulatory nightmare</p>
                <p><strong>Education Failure:</strong> Only 24% of teachers feel AI-competent, 69% of schools lack AI policies</p>
                <p>Kids are learning AI from YouTube, not schools. 32 states report severe STEM teacher shortages.</p>
            </div>

            <div class="faq-section">
                <h3>Common Questions</h3>
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">‚ùì But isn't free information good for equality?</div>
                    <div class="faq-answer">
                        That was the promise. Reality: The Middle Management Massacre - 69% of managerial tasks automated by end of 2024. Entry-level jobs could drop 50% in 5 years. Career ladders completely broken. C-suite optimistic while middle management faces doom. Banks saving $70 billion through automation. AI companies paying 25% wage premium while traditional workers face permanent underclass status.
                    </div>
                </div>
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">‚ùì Who's actually winning with AI?</div>
                    <div class="faq-answer">
                        Surprising Winners: Agriculture (30% job growth by 2028), healthcare (adding 15M workers), ambitious non-technical entrepreneurs. Surprising Losers: Prompt engineers (bubble burst from 144 to 20-30 searches/million), senior developers with 20+ years experience, middle managers (69% of tasks automated), perfectionists who can't ship "good enough". The paradox: Entry-level jobs vanishing while experience becomes a liability.
                    </div>
                </div>
                <div class="faq-item" onclick="toggleFAQ(this)">
                    <div class="faq-question">‚ùì Is this gap reversible?</div>
                    <div class="faq-answer">
                        No. Government response vacuum - US has 40 states with conflicting AI bills, no federal protection. EU leading with AI Act, US lagging. Workers have zero protection. The reemployment reality: AI-displaced workers 2x more likely to be unemployed 1+ year, 58% must completely change careers at 30% pay cuts. Mental health crisis exploding - new "Automation Anxiety Disorder" being studied. Political powder keg forming with rising populism in displaced regions.
                    </div>
                </div>
            </div>
        </div>

        <!-- See It Happen Tab -->
        <div id="see" class="content hidden">
            <h2>Watch the Gap Grow in Real-Time</h2>
            
            <div class="explanation-box">
                <h4>üëÄ What You're Watching</h4>
                <p>Two groups of people starting with the same $50,000 salary. Watch what happens over 6 years.</p>
            </div>

            <!-- Visual Income Comparison -->
            <div style="background: white; padding: 30px; border-radius: 10px; margin: 20px 0;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
                    <div style="text-align: center;">
                        <h3 style="color: #667eea;">AI Adopters</h3>
                        <div style="font-size: 2em; margin: 10px 0;">üöÄ</div>
                        <div id="eliteIncome" style="font-size: 3em; font-weight: bold; color: #667eea;">$50,000</div>
                        <p>Using AI daily, learning fast</p>
                    </div>
                    <div style="text-align: center;">
                        <h3 style="color: #764ba2;">Traditional Workers</h3>
                        <div style="font-size: 2em; margin: 10px 0;">üê¢</div>
                        <div id="massIncome" style="font-size: 3em; font-weight: bold; color: #764ba2;">$50,000</div>
                        <p>Avoiding AI, sticking to old ways</p>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee;">
                    <h4>Income Gap</h4>
                    <div id="incomeGapDisplay" style="font-size: 4em; font-weight: bold; color: #e74c3c;">1x</div>
                    <p id="gapMeaning">They earn the same</p>
                </div>
            </div>

            <div class="plot-container">
                <div id="mainVisualization"></div>
            </div>

            <div class="slider-container">
                <div class="slider-description">
                    üéÆ <strong>Try This:</strong> Move the slider to see how AI speed changes everything
                </div>
                <div class="slider-label">
                    <span>AI Progress Speed</span>
                    <span id="aiSpeedValue">Normal (38% per year)</span>
                </div>
                <input type="range" id="aiSpeedSlider" min="10" max="100" value="38" oninput="updateAISpeed()">
                <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 0.9em; color: #666;">
                    <span>üê¢ Slow AI Progress</span>
                    <span>üöÄ Fast AI Progress</span>
                </div>
            </div>

            <div class="insight-box">
                <h4>üîç What to Notice</h4>
                <ul>
                    <li>Traditional experts (developers, artists) are declining</li>
                    <li>Ambitious non-experts are rising exponentially</li>
                    <li>The divide is about adaptability, not education</li>
                    <li>Speed beats expertise in the AI era</li>
                </ul>
            </div>

            <h3>The Acceleration Problem</h3>
            <div class="plot-container">
                <div id="accelerationVisualization"></div>
            </div>

            <div class="explanation-box">
                <h4>üöÄ Why This Matters</h4>
                <p><strong>The brutal reality:</strong> Your skills are decaying faster than you can learn new ones. The red area shows your current expertise losing value. The blue line shows AI getting exponentially better. The green dashed line? That's the maximum speed humans can possibly adapt - and it's not fast enough.</p>
                <p><strong>The "Death Cross":</strong> Around 2026-2027, AI capabilities cross above most people's skill relevance. After this point, catching up becomes nearly impossible because AI improves faster than humans can learn.</p>
            </div>
        </div>

        <!-- Why It Happens Tab -->
        <div id="why" class="content hidden">
            <h2>Why The Gap Keeps Growing</h2>
            
            <div class="explanation-box" style="background: #e3f2fd; border-color: #2196f3;">
                <h4>üéÆ Interactive Demo: The 5 Forces Creating the Divide</h4>
                <p>Click each factor below to see how it works. Watch how small differences become huge gaps.</p>
            </div>
            
            <!-- Interactive Five Factors -->
            <div id="fiveFactorsDemo" style="margin: 30px 0;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div class="factor-card" onclick="showFactor('speed')" style="background: #fff; padding: 20px; border-radius: 10px; cursor: pointer; text-align: center; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 3em; margin-bottom: 10px;">üèÉ</div>
                        <h4 style="color: #667eea; margin: 10px 0;">Learning Speed</h4>
                        <p style="font-size: 0.9em;">Some learn 8x faster</p>
                    </div>
                    <div class="factor-card" onclick="showFactor('patience')" style="background: #fff; padding: 20px; border-radius: 10px; cursor: pointer; text-align: center; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 3em; margin-bottom: 10px;">‚è≥</div>
                        <h4 style="color: #667eea; margin: 10px 0;">Patience</h4>
                        <p style="font-size: 0.9em;">Can you wait for payoff?</p>
                    </div>
                    <div class="factor-card" onclick="showFactor('capacity')" style="background: #fff; padding: 20px; border-radius: 10px; cursor: pointer; text-align: center; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 3em; margin-bottom: 10px;">üß†</div>
                        <h4 style="color: #667eea; margin: 10px 0;">Mental Capacity</h4>
                        <p style="font-size: 0.9em;">Brain has limits</p>
                    </div>
                    <div class="factor-card" onclick="showFactor('compound')" style="background: #fff; padding: 20px; border-radius: 10px; cursor: pointer; text-align: center; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 3em; margin-bottom: 10px;">üí∞</div>
                        <h4 style="color: #667eea; margin: 10px 0;">Compound Effect</h4>
                        <p style="font-size: 0.9em;">Rich get richer</p>
                    </div>
                    <div class="factor-card" onclick="showFactor('network')" style="background: #fff; padding: 20px; border-radius: 10px; cursor: pointer; text-align: center; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="font-size: 3em; margin-bottom: 10px;">üåê</div>
                        <h4 style="color: #667eea; margin: 10px 0;">Network Effects</h4>
                        <p style="font-size: 0.9em;">Winners cluster together</p>
                    </div>
                </div>
                
                <!-- Visual Demonstration Area -->
                <div id="factorDemo" style="background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); min-height: 400px;">
                    <div id="demoContent" style="text-align: center;">
                        <h3 style="color: #667eea;">Click a factor above to see how it works</h3>
                        <p style="font-size: 1.2em; margin: 20px 0;">Each factor multiplies the others, creating exponential differences</p>
                        <div style="font-size: 5em; margin: 20px 0;">üëÜ</div>
                    </div>
                </div>
            </div>
            
            <style>
                .factor-card:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 6px 12px rgba(0,0,0,0.15) !important;
                }
                .factor-card.active {
                    background: #667eea !important;
                    color: white !important;
                }
                .factor-card.active h4, .factor-card.active p {
                    color: white !important;
                }
            </style>

            <h3>AI Impact by Industry: Winners and Losers (2024-2025 Data)</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Industry</th>
                        <th>Current Impact</th>
                        <th>Key Statistics</th>
                        <th>Future Outlook</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="tooltip">Software Development<span class="tooltiptext">Developers, programmers, engineers</span></span></td>
                        <td>Massive layoffs despite growth projections</td>
                        <td>230k+ laid off; 80% using AI tools</td>
                        <td>17% growth (BLS) vs reality of cuts</td>
                    </tr>
                    <tr>
                        <td><span class="tooltip">Journalism/Writing<span class="tooltiptext">Reporters, editors, content creators</span></span></td>
                        <td>Industry collapsing</td>
                        <td>2,700 jobs cut; 2/3 journalists gone</td>
                        <td>Continued decline</td>
                    </tr>
                    <tr>
                        <td><span class="tooltip">Legal Services<span class="tooltiptext">Lawyers, paralegals, legal support</span></span></td>
                        <td>Rapid AI adoption</td>
                        <td>19%‚Üí79% AI use in 1 year</td>
                        <td>44% of work automatable</td>
                    </tr>
                    <tr>
                        <td><span class="tooltip">Healthcare<span class="tooltiptext">Doctors, nurses, medical staff</span></span></td>
                        <td>AI augmenting, not replacing</td>
                        <td>80% hospitals using AI; 66% doctors</td>
                        <td>$431B market by 2032</td>
                    </tr>
                    <tr>
                        <td><span class="tooltip">Education<span class="tooltiptext">Teachers, professors, trainers</span></span></td>
                        <td>Protected but stressed</td>
                        <td>51k teachers quit in one month</td>
                        <td>AI as tool, not replacement</td>
                    </tr>
                    <tr>
                        <td><span class="tooltip">Design<span class="tooltiptext">UI/UX, graphic, product designers</span></span></td>
                        <td>Market oversaturated</td>
                        <td>Significant job listing decline</td>
                        <td>Unclear trajectory</td>
                    </tr>
                </tbody>
            </table>

            <!-- Industry Impact Section -->
            <div class="plot-container">
                <div id="factorsVisualization"></div>
            </div>
            
            <script>
                function showFactor(factor) {
                    // Remove active class from all cards
                    document.querySelectorAll('.factor-card').forEach(card => {
                        card.classList.remove('active');
                    });
                    
                    // Add active class to clicked card
                    event.currentTarget.classList.add('active');
                    
                    const demos = {
                        speed: {
                            title: 'üèÉ Learning Speed: The 8x Difference',
                            content: `
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center;">
                                    <div>
                                        <h4>Elite Learners (40% of opportunities)</h4>
                                        <div style="background: #667eea; height: 200px; width: 100%; border-radius: 10px; position: relative; overflow: hidden;">
                                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: #4c5fd7; animation: fillUp 2s ease-out forwards;" data-height="80%"></div>
                                        </div>
                                        <p style="margin-top: 10px;">Take online courses, read research, use AI daily</p>
                                    </div>
                                    <div>
                                        <h4>Average Workers (5% of opportunities)</h4>
                                        <div style="background: #e0e0e0; height: 200px; width: 100%; border-radius: 10px; position: relative; overflow: hidden;">
                                            <div style="position: absolute; bottom: 0; left: 0; right: 0; background: #bdbdbd; animation: fillUp 2s ease-out forwards;" data-height="10%"></div>
                                        </div>
                                        <p style="margin-top: 10px;">Too busy surviving to learn new skills</p>
                                    </div>
                                </div>
                                <p style="text-align: center; font-size: 1.2em; margin-top: 30px;"><strong>Result:</strong> Elite learners absorb knowledge 8x faster. With 2.2 year skill half-life, gap widens 35% faster than 2024.</p>
                            `
                        },
                        patience: {
                            title: '‚è≥ Patience: The Hidden Killer',
                            content: `
                                <div style="text-align: center;">
                                    <h4>Would you take this deal?</h4>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin: 30px 0;">
                                        <div style="background: #ffebee; padding: 30px; border-radius: 10px; border: 2px solid #f44336;">
                                            <h3>$100 Today</h3>
                                            <div style="font-size: 4em;">üíµ</div>
                                            <p>Immediate cash in hand</p>
                                        </div>
                                        <div style="background: #e8f5e9; padding: 30px; border-radius: 10px; border: 2px solid #4caf50;">
                                            <h3>$200 in One Year</h3>
                                            <div style="font-size: 4em;">üí∞</div>
                                            <p>Double your money... later</p>
                                        </div>
                                    </div>
                                    <p style="font-size: 1.2em;"><strong>Elite (7% loss to impatience):</strong> Take the $200 - they can afford to wait</p>
                                    <p style="font-size: 1.2em;"><strong>Struggling (22% loss):</strong> Take the $100 - bills are due now</p>
                                    <p style="margin-top: 20px; font-style: italic;">This same psychology applies to learning: Those under financial stress can't invest time in future skills.</p>
                                </div>
                            `
                        },
                        capacity: {
                            title: 'üß† Mental Capacity: Your Brain Has Limits',
                            content: `
                                <div style="text-align: center;">
                                    <h4>Think of your brain like a computer...</h4>
                                    <div style="margin: 30px auto; max-width: 400px;">
                                        <div style="background: #f5f5f5; border: 2px solid #333; border-radius: 10px; padding: 20px;">
                                            <div style="background: #333; color: white; padding: 10px; border-radius: 5px; margin-bottom: 20px;">
                                                <div>RAM: Working Memory</div>
                                            </div>
                                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                                                <div style="background: #4caf50; height: 30px; border-radius: 3px;"></div>
                                                <div style="background: #4caf50; height: 30px; border-radius: 3px;"></div>
                                                <div style="background: #4caf50; height: 30px; border-radius: 3px;"></div>
                                                <div style="background: #f44336; height: 30px; border-radius: 3px; animation: blink 1s infinite;"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <p style="font-size: 1.2em;"><strong>Problem:</strong> You can only hold 7¬±2 things in your mind at once</p>
                                    <p>Elite learners have learned to "chunk" information better</p>
                                    <p>Stressed workers have even less capacity (worry takes up space)</p>
                                    <p style="margin-top: 20px; font-weight: bold;">As you learn more, it gets harder to add new knowledge - unless you know the tricks.</p>
                                </div>
                            `
                        },
                        compound: {
                            title: 'üí∞ Compound Effect: The Penny That Becomes Millions',
                            content: `
                                <div style="text-align: center;">
                                    <h4>Which would you choose?</h4>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin: 30px 0;">
                                        <div style="background: #fff3e0; padding: 30px; border-radius: 10px;">
                                            <h3>$1 Million Cash</h3>
                                            <div style="font-size: 3em;">üíµ</div>
                                        </div>
                                        <div style="background: #e8eaf6; padding: 30px; border-radius: 10px;">
                                            <h3>1¬¢ Doubled Daily for 30 Days</h3>
                                            <div style="font-size: 3em;">ü™ô</div>
                                        </div>
                                    </div>
                                    <p style="font-size: 1.4em; color: #667eea;">The penny becomes <strong>$10.7 million!</strong></p>
                                    <p style="margin: 20px 0;">This is how knowledge works with AI:</p>
                                    <ul style="text-align: left; max-width: 600px; margin: 0 auto; font-size: 1.1em;">
                                        <li>Know a little ‚Üí AI helps a little</li>
                                        <li>Know more ‚Üí AI helps exponentially more</li>
                                        <li>Expert knowledge ‚Üí AI makes you superhuman</li>
                                    </ul>
                                    <p style="margin-top: 20px; font-style: italic;">The rich (in knowledge) get richer. The poor stay poor.</p>
                                </div>
                            `
                        },
                        network: {
                            title: 'üåê Network Effects: Success Attracts Success',
                            content: `
                                <div style="text-align: center;">
                                    <h4>Where would you rather work?</h4>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin: 30px 0;">
                                        <div>
                                            <h3>AI Cluster (Nashville, Austin)</h3>
                                            <div style="background: #e3f2fd; padding: 20px; border-radius: 10px; position: relative; height: 200px;">
                                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                                    <div style="display: flex; gap: 10px; justify-content: center;">
                                                        <div style="font-size: 2em;">üë®‚Äçüíª</div>
                                                        <div style="font-size: 2em;">üë©‚Äçüíº</div>
                                                        <div style="font-size: 2em;">üßë‚Äçüî¨</div>
                                                        <div style="font-size: 2em;">üë®‚Äçüè´</div>
                                                    </div>
                                                    <p style="margin-top: 10px;">Everyone uses AI</p>
                                                </div>
                                            </div>
                                            <ul style="text-align: left; margin-top: 10px;">
                                                <li>Learn from peers daily</li>
                                                <li>Better job opportunities</li>
                                                <li>Higher salaries</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h3>AI Desert (Rural Areas)</h3>
                                            <div style="background: #ffebee; padding: 20px; border-radius: 10px; position: relative; height: 200px;">
                                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                                    <div style="font-size: 2em;">üèúÔ∏è</div>
                                                    <p style="margin-top: 10px;">39% less internet</p>
                                                </div>
                                            </div>
                                            <ul style="text-align: left; margin-top: 10px;">
                                                <li>No one to learn from</li>
                                                <li>Few AI jobs</li>
                                                <li>Falling further behind</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <p style="font-size: 1.2em;"><strong>Result:</strong> Success creates more success. Isolation creates more isolation.</p>
                                </div>
                            `
                        }
                    };
                    
                    const demo = demos[factor];
                    document.getElementById('demoContent').innerHTML = `
                        <h3 style="color: #667eea; margin-bottom: 30px;">${demo.title}</h3>
                        ${demo.content}
                    `;
                    
                    // Trigger animations
                    setTimeout(() => {
                        const fillElements = document.querySelectorAll('[data-height]');
                        fillElements.forEach(el => {
                            el.style.height = el.getAttribute('data-height');
                        });
                    }, 100);
                }
                
                // Add animation styles
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes fillUp {
                        from { height: 0; }
                        to { height: var(--target-height, 50%); }
                    }
                    @keyframes blink {
                        0%, 50% { opacity: 1; }
                        51%, 100% { opacity: 0.3; }
                    }
                    [data-height] {
                        transition: height 2s ease-out;
                    }
                `;
                document.head.appendChild(style);
            </script>

            <h3>See the Impact: Winners and Losers by Industry</h3>
            
            <div style="background: white; padding: 30px; border-radius: 10px; margin: 30px 0;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; text-align: center;">
                    <!-- Tech -->
                    <div style="padding: 20px; border-radius: 10px; background: #ffebee;">
                        <div style="font-size: 3em;">üë®‚Äçüíª</div>
                        <h4 style="margin: 10px 0;">Tech Workers</h4>
                        <div style="font-size: 2em; color: #d32f2f; font-weight: bold;">-230,831</div>
                        <p style="font-size: 0.9em;">Jobs lost</p>
                    </div>
                    <!-- Journalism -->
                    <div style="padding: 20px; border-radius: 10px; background: #ffebee;">
                        <div style="font-size: 3em;">üì∞</div>
                        <h4 style="margin: 10px 0;">Journalists</h4>
                        <div style="font-size: 2em; color: #d32f2f; font-weight: bold;">-67%</div>
                        <p style="font-size: 0.9em;">Industry shrunk</p>
                    </div>
                    <!-- Legal -->
                    <div style="padding: 20px; border-radius: 10px; background: #fff3e0;">
                        <div style="font-size: 3em;">‚öñÔ∏è</div>
                        <h4 style="margin: 10px 0;">Lawyers</h4>
                        <div style="font-size: 2em; color: #f57c00; font-weight: bold;">19%‚Üí79%</div>
                        <p style="font-size: 0.9em;">AI adoption in 1 year</p>
                    </div>
                    <!-- Healthcare -->
                    <div style="padding: 20px; border-radius: 10px; background: #e8f5e9;">
                        <div style="font-size: 3em;">üè•</div>
                        <h4 style="margin: 10px 0;">Healthcare</h4>
                        <div style="font-size: 2em; color: #388e3c; font-weight: bold;">+15M</div>
                        <p style="font-size: 0.9em;">Jobs needed</p>
                    </div>
                    <!-- Agriculture -->
                    <div style="padding: 20px; border-radius: 10px; background: #e8f5e9;">
                        <div style="font-size: 3em;">üåæ</div>
                        <h4 style="margin: 10px 0;">Farming</h4>
                        <div style="font-size: 2em; color: #388e3c; font-weight: bold;">+30M</div>
                        <p style="font-size: 0.9em;">Jobs by 2028</p>
                    </div>
                    <!-- Education -->
                    <div style="padding: 20px; border-radius: 10px; background: #e3f2fd;">
                        <div style="font-size: 3em;">üè´</div>
                        <h4 style="margin: 10px 0;">Teachers</h4>
                        <div style="font-size: 2em; color: #1976d2; font-weight: bold;">24%</div>
                        <p style="font-size: 0.9em;">Feel AI-ready</p>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee;">
                    <p style="font-size: 1.2em;"><strong>The Pattern:</strong> Physical work + human judgment = Safe. Digital work + repeatable tasks = Danger.</p>
                </div>
            </div>

            <div class="insight-box">
                <h4>üìä The Numbers Don't Lie</h4>
                <p><strong>World Economic Forum 2025:</strong> 92 million jobs displaced, 170 million created = net +78 million. BUT: Tech workers can't become nurses, journalists can't become AI engineers. The transition is a myth. <strong>39% of current skills</strong> will be obsolete by 2030.</p>
                
                <div class="explanation-box" style="margin-top: 20px;">
                    <h4>üß† Why This Happens (In Plain English)</h4>
                    <p><strong>The Snowball Effect:</strong> Knowledge is like a snowball rolling downhill. People who already know a lot (big snowball) pick up new knowledge faster when AI helps. Small snowballs barely grow.</p>
                    <p><strong>The Math:</strong> Your future = (Learning speed √ó Patience √ó Mental capacity √ó AI access)^2.8 for winners vs ^0.5 for losers</p>
                    <p><strong>The Brutal Truth:</strong> This creates runaway effects. Once you're behind, catching up becomes mathematically impossible after 2027.</p>
                </div>
                
                <div class="story-box" style="background: #e8f5e9; border-color: #4caf50; margin-top: 20px;">
                    <h3>‚úÖ What Actually Works (Evidence-Based)</h3>
                    <p><strong>Start TODAY (not tomorrow):</strong></p>
                    <ul>
                        <li>Pick ONE AI tool - any tool - and use it for 15 minutes</li>
                        <li>Don't read about it, don't plan - just DO</li>
                        <li>Perfectionism kills adaptation - ship "good enough"</li>
                    </ul>
                    <p><strong>Build AI-fluent network:</strong></p>
                    <ul>
                        <li>You become who you surround yourself with</li>
                        <li>Join Discord/Reddit communities in your field using AI</li>
                        <li>Geographic clusters matter - consider moving</li>
                    </ul>
                    <p><strong>Document everything:</strong></p>
                    <ul>
                        <li>Your AI experiments become your new resume</li>
                        <li>Degrees are worthless - portfolios are everything</li>
                        <li>Speed of shipping beats quality of credentials</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Future Scenarios Tab -->
        <div id="future" class="content hidden">
            <h2>Choose Your Future: See What Happens by 2030</h2>
            
            <div class="explanation-box">
                <h4>üéÆ Build Your Own Future</h4>
                <p>Move the sliders to see different futures. Which one are we heading toward?</p>
            </div>

            <!-- Visual Future Builder -->
            <div style="background: white; padding: 30px; border-radius: 10px; margin: 20px 0;">
                <div class="slider-container" style="background: #f5f7fa; margin-bottom: 0;">
                    <div class="slider-label">
                        <span>ü§ñ AI Development Speed</span>
                        <span id="futureAIValue">Current Pace</span>
                    </div>
                    <input type="range" id="futureAISlider" min="0" max="100" value="50" oninput="updateFutureScenario()">
                    <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.9em; color: #666;">
                        <span>Slow üê¢</span>
                        <span>Current üöó</span>
                        <span>Fast üöÄ</span>
                    </div>
                    
                    <div class="slider-label" style="margin-top: 20px;">
                        <span>üè´ Government Response</span>
                        <span id="interventionValue">None</span>
                    </div>
                    <input type="range" id="interventionSlider" min="0" max="100" value="0" oninput="updateFutureScenario()">
                    <div style="display: flex; justify-content: space-between; margin-top: 5px; font-size: 0.9em; color: #666;">
                        <span>Nothing üò¥</span>
                        <span>Some Help ü§ù</span>
                        <span>Major Action üí°</span>
                    </div>
                </div>
                
                <!-- Visual Society Display -->
                <div id="societyVisual" style="margin-top: 30px; padding: 30px; background: #f8f9fa; border-radius: 10px;">
                    <h3 style="text-align: center; color: #667eea; margin-bottom: 20px;">Your 2030 Society</h3>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 30px;">
                        <!-- Rich Side -->
                        <div style="text-align: center;">
                            <h4>AI Adopters</h4>
                            <div id="richHouses" style="font-size: 3em; margin: 10px 0;">üè¶üè¶üè¶</div>
                            <div id="richIncome" style="font-size: 2em; font-weight: bold; color: #4caf50;">$250,000/year</div>
                            <p id="richLife" style="margin-top: 10px;">Thriving in AI economy</p>
                        </div>
                        
                        <!-- Poor Side -->
                        <div style="text-align: center;">
                            <h4>Traditional Workers</h4>
                            <div id="poorHouses" style="font-size: 3em; margin: 10px 0;">üè†</div>
                            <div id="poorIncome" style="font-size: 2em; font-weight: bold; color: #f44336;">$35,000/year</div>
                            <p id="poorLife" style="margin-top: 10px;">Struggling to survive</p>
                        </div>
                    </div>
                    
                    <!-- Society Meter -->
                    <div style="text-align: center;">
                        <h4>Society Health Meter</h4>
                        <div style="background: #e0e0e0; height: 30px; border-radius: 15px; overflow: hidden; margin: 10px auto; max-width: 400px;">
                            <div id="societyHealthBar" style="height: 100%; background: linear-gradient(to right, #f44336, #ff9800, #4caf50); width: 30%; transition: width 0.5s;"></div>
                        </div>
                        <p id="societyHealthText" style="font-size: 1.2em; margin-top: 10px;">Unstable - High inequality</p>
                    </div>
                </div>
            </div>

            <div class="metric-display" id="futureMetrics" style="margin-top: 30px;">
                <div class="metric-card">
                    <div class="metric-label">Income Gap</div>
                    <div class="metric-value" id="futureGapValue">7.1x</div>
                    <div class="metric-context" id="futureGapContext">Extreme inequality</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Can Poor Become Rich?</div>
                    <div class="metric-value" id="mobilityValue">No</div>
                    <div class="metric-context" id="mobilityContext">Gap too wide</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Society Type</div>
                    <div class="metric-value" id="societyValue">Two Worlds</div>
                    <div class="metric-context" id="societyContext">Separate realities</div>
                </div>
            </div>
            
            <!-- Future Visualization Plot -->
            <div class="plot-container" style="margin-top: 30px;">
                <div id="futureVisualization"></div>
            </div>

            <h3>Scenario Breakdown</h3>
            
            <div class="real-world-example" id="scenario1">
                <h4>üí° Scenario 1: The Great Reshuffling</h4>
                <ul>
                    <li>Traditional expertise becomes commodity (developers, designers, analysts)</li>
                    <li>Ambitious non-experts use AI to compete at expert level</li>
                    <li>Speed of adaptation matters more than years of experience</li>
                    <li>Business acumen + AI beats technical skill alone</li>
                </ul>
                <p><strong>Evidence:</strong> 92% of developers forced to use AI, while non-coders build million-dollar apps</p>
            </div>

            <div class="story-box" id="scenario2">
                <h3>‚ö° Scenario 2: The Compound Acceleration</h3>
                <ul>
                    <li>74% of companies fail to achieve AI value at scale</li>
                    <li>The 26% who succeed gain massive competitive advantages</li>
                    <li>Top 10% capture 70% of AI productivity gains</li>
                    <li>Permanent bifurcation of human capital markets</li>
                </ul>
                <p><strong>Evidence:</strong> BCG research 2024, IMF Global Analysis
            </div>

            <div class="insight-box" id="scenario3">
                <h4>üå™Ô∏è Scenario 3: The Automation Cliff</h4>
                <ul>
                    <li>10% probability of full job automation by 2037</li>
                    <li>50% probability within this century</li>
                    <li>2-3x faster than previous automation waves</li>
                    <li>No clear path for displaced workers</li>
                </ul>
                <p><strong>Timeline:</strong> AI researchers' consensus estimates
            </div>
        </div>

        <!-- Reality Tab -->
        <div id="reality" class="content hidden">
            <h2>The Uncomfortable Reality: Why Nothing Works</h2>
            
            <div class="big-idea" style="background: #ffebee; border-color: #f44336;">
                <strong>‚ö†Ô∏è Hard Truth:</strong> We tested every "solution" people suggest. Here's why they all fail.
            </div>
            
            <!-- Visual Solutions That Don't Work -->
            <div style="background: white; padding: 30px; border-radius: 10px; margin: 20px 0;">
                <h3 style="text-align: center; color: #667eea; margin-bottom: 30px;">The "Solutions" That Don't Work</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <!-- Solution 1 -->
                    <div style="background: #ffebee; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 10px;">üè´</div>
                        <h4>"Just Get More Education"</h4>
                        <div style="font-size: 2em; color: #f44336; font-weight: bold;">15%</div>
                        <p>Success rate of retraining programs (2025)</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">Skills expire in 2.2 years (was 2.5)</p>
                    </div>
                    
                    <!-- Solution 2 -->
                    <div style="background: #ffebee; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 10px;">üíª</div>
                        <h4>"Learn to Code"</h4>
                        <div style="font-size: 2em; color: #f44336; font-weight: bold;">-230,831</div>
                        <p>Developer jobs lost</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">AI codes better than humans now</p>
                    </div>
                    
                    <!-- Solution 3 -->
                    <div style="background: #ffebee; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 10px;">üè¶</div>
                        <h4>"Government Will Help"</h4>
                        <div style="font-size: 2em; color: #f44336; font-weight: bold;">40 States</div>
                        <p>64% still in "exploration" phase</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">No federal protection coming</p>
                    </div>
                    
                    <!-- Solution 4 -->
                    <div style="background: #ffebee; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 10px;">üíµ</div>
                        <h4>"Universal Basic Income"</h4>
                        <div style="font-size: 2em; color: #f44336; font-weight: bold;">$3T+</div>
                        <p>Annual cost</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">Political impossibility</p>
                    </div>
                </div>
            </div>

            <!-- What Actually Works -->
            <div style="background: #e8f5e9; padding: 30px; border-radius: 10px; margin: 30px 0;">
                <h3 style="text-align: center; color: #4caf50; margin-bottom: 30px;">The Only Things That Actually Work</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div style="background: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 10px;">‚è±Ô∏è</div>
                        <h4>Start RIGHT NOW</h4>
                        <p>Every day you wait, the gap grows exponentially</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 10px;">üöÄ</div>
                        <h4>Ship Fast, Not Perfect</h4>
                        <p>Bad AI work beats perfect traditional work</p>
                    </div>
                    
                    <div style="background: white; padding: 20px; border-radius: 10px; text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 10px;">üë•</div>
                        <h4>Network with AI Users</h4>
                        <p>You become who you surround yourself with</p>
                    </div>
                </div>
            </div>
            
            <h3>The Real Winners: Ambitious Outsiders</h3>
            
            <div class="real-world-example">
                <h4>üöÄ Who's Actually Thriving</h4>
                <ul>
                    <li><strong>Non-technical entrepreneurs:</strong> Building products without coding</li>
                    <li><strong>Domain experts:</strong> Leveraging AI to bypass technical gatekeepers</li>
                    <li><strong>Self-taught hustlers:</strong> Getting AI jobs without degrees</li>
                    <li><strong>Creative business minds:</strong> Using AI to scale 100x faster</li>
                </ul>
                <p><strong>The Key:</strong> AI costs dropped 280-fold in 18 months. Anyone with ambition and domain knowledge can now compete with established players. Traditional credentials are becoming liabilities.</p>
            </div>

            <h3>The Cognitive Offloading Trap</h3>
            
            <div class="story-box">
                <h3>üß† The Atrophy Effect</h3>
                <p>Research from 2024 shows a disturbing pattern:</p>
                <ul>
                    <li>Students using AI show <strong>reduced critical thinking engagement</strong></li>
                    <li>Middle-skill workers experience <strong>expertise value erosion</strong></li>
                    <li>Over-dependence creates <strong>long-term cognitive atrophy</strong></li>
                </ul>
                <p><strong>The Paradox:</strong> Those who need AI most to catch up become most vulnerable to cognitive dependency, widening the gap further.</p>
            </div>

            <h3>Capital Concentration Accelerates</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>Current Reality</th>
                        <th>Trajectory</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>US AI Investment Advantage</td>
                        <td>8.7x more than China</td>
                        <td>Accelerating</td>
                    </tr>
                    <tr>
                        <td>AI Models Produced (US)</td>
                        <td>61 notable models</td>
                        <td>Exponential growth</td>
                    </tr>
                    <tr>
                        <td>Company Success Rate</td>
                        <td>26% achieve AI value</td>
                        <td>Winner-take-all emerging</td>
                    </tr>
                    <tr>
                        <td>Automation Timeline</td>
                        <td>10% chance by 2037</td>
                        <td>2-3x faster than predicted</td>
                    </tr>
                </tbody>
            </table>

            <h3>The Network Effect Creates AI Deserts</h3>
            
            <div class="insight-box">
                <h4>üèúÔ∏è Why Recovery Becomes Impossible</h4>
                <p>AI adoption shows strong network effects - the value increases with more users. This creates:</p>
                <ul>
                    <li><strong>"AI Deserts"</strong> where entire regions fall permanently behind</li>
                    <li><strong>Exponentially harder recovery</strong> as the gap widens</li>
                    <li><strong>Self-reinforcing cycles</strong> where success breeds more success</li>
                    <li><strong>Permanent bifurcation</strong> of human capital markets</li>
                </ul>
            </div>

            <!-- Geographic Reality Visual -->
            <div style="background: white; padding: 30px; border-radius: 10px; margin: 30px 0;">
                <h3 style="text-align: center; color: #667eea; margin-bottom: 30px;">The Geographic Truth: Your Location = Your Future</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                    <div style="text-align: center;">
                        <h4 style="color: #4caf50;">AI Clusters</h4>
                        <div style="font-size: 4em;">üåÜ</div>
                        <p><strong>Nashville, Austin, Las Vegas</strong></p>
                        <ul style="text-align: left; margin: 10px auto; max-width: 200px;">
                            <li>Fast internet everywhere</li>
                            <li>AI jobs abundant</li>
                            <li>Everyone learning together</li>
                            <li>Salaries rising fast</li>
                        </ul>
                    </div>
                    
                    <div style="text-align: center;">
                        <h4 style="color: #f44336;">AI Deserts</h4>
                        <div style="font-size: 4em;">üèúÔ∏è</div>
                        <p><strong>Rural Areas</strong></p>
                        <ul style="text-align: left; margin: 10px auto; max-width: 200px;">
                            <li>39% less internet</li>
                            <li>No AI companies</li>
                            <li>Nobody to learn from</li>
                            <li>Falling further behind</li>
                        </ul>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #eee;">
                    <p style="font-size: 1.2em; color: #f44336;"><strong>If you're in an AI desert, moving might be your only option.</strong></p>
                </div>
            </div>
            
            <div class="plot-container">
                <div id="realityChart"></div>
            </div>

            <h3>Data Sources & Evidence</h3>
            
            <div class="explanation-box">
                <h4>üìë Where These Numbers Come From</h4>
                <p><strong>Tech Layoffs:</strong> The Register, FinalRoundAI (2024-2025)</p>
                <p><strong>Journalism:</strong> Press Gazette, Institute of Independent Journalists (2024)</p>
                <p><strong>Legal AI:</strong> Clio Legal Trends Report, Goldman Sachs (2024)</p>
                <p><strong>Healthcare:</strong> American Medical Association, VentionTeams (2024)</p>
                <p><strong>Education:</strong> Statista, Education Week (2024)</p>
                <p><strong>Overall Impact:</strong> World Economic Forum Future of Jobs Report 2025</p>
                <br>
                <p><strong>Key Finding:</strong> 22% of all jobs will be disrupted by 2030, with 39% of current skills becoming obsolete. The transition myth: displaced workers rarely move to new AI-created roles.</p>
            </div>

            <div class="share-section">
                <h3>Share This Reality Check</h3>
                <p>Understanding the true scope of the challenge is the first step</p>
                <button class="share-button" onclick="shareTwitter()">Share on Twitter</button>
                <button class="share-button" onclick="shareLinkedIn()">Share on LinkedIn</button>
                <button class="share-button" onclick="copyLink()">Copy Link</button>
            </div>

            <!-- 2025 Update: Who's Getting Hit Hardest -->
            <h3 style="color: #d32f2f; margin-top: 40px;">2025 Update: The Disparities Deepen</h3>
            
            <div class="alert-box" style="background: #ffebee; border: 2px solid #d32f2f; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4>‚ö†Ô∏è New Data Shows Accelerating Inequality</h4>
                <p>Latest research reveals the gap is widening 35% faster than our 2024 predictions:</p>
                <ul style="margin-top: 10px;">
                    <li><strong>Gender Gap:</strong> 59M women vs 49M men at high displacement risk</li>
                    <li><strong>Regional Divide:</strong> 70% AI adoption in tech hubs vs 30% in rural areas</li>
                    <li><strong>Skill Decay:</strong> Technical skills now obsolete in just 2.2 years (was 2.5)</li>
                    <li><strong>Retraining Failure:</strong> Only 15% of government programs succeed</li>
                </ul>
            </div>

            <div class="plot-container">
                <div id="disparitiesVisualization"></div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin: 30px 0;">
                <div class="insight-box" style="background: #fce4ec;">
                    <h4>üë© Gender Disparity: The Hidden Crisis</h4>
                    <p>Women are 1.2x more likely to be displaced by AI automation:</p>
                    <ul>
                        <li>Administrative roles: 78% automatable</li>
                        <li>Clerical work: 82% at risk</li>
                        <li>Customer service: 65% replaceable</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>Root cause:</strong> Historic concentration in routine cognitive work now most vulnerable to AI.</p>
                </div>
                
                <div class="insight-box" style="background: #e8f5e9;">
                    <h4>üìç Location Lottery: Your ZIP Code = Your Future</h4>
                    <p>AI adoption varies dramatically by region:</p>
                    <ul>
                        <li><strong>Nashville/Austin:</strong> 70%+ firms using AI</li>
                        <li><strong>Rural America:</strong> 30% adoption rate</li>
                        <li><strong>Europe:</strong> 45% (regulation slows progress)</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>The trap:</strong> Can't afford to move to AI hubs, can't afford to stay in AI deserts.</p>
                </div>
            </div>
        </div>

        <!-- Technical Details Tab -->
        <!-- 3D Visualization Tab -->
        <div id="visualize3d" class="content hidden">
            <h2>The Divergence in 3D: Watch the Gap Explode</h2>
            
            <div class="explanation-box">
                <h4>üåê What This Shows</h4>
                <p>This 3D visualization shows how small differences today become massive gaps tomorrow. Each sphere represents a person's economic potential. Watch how AI creates two separate worlds.</p>
                <p><strong>Controls:</strong> Click and drag to rotate ‚Ä¢ Scroll to zoom ‚Ä¢ Press SPACE to restart animation</p>
            </div>
            
            <div id="three-container" style="width: 100%; height: 600px; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1);"></div>
            
            <div class="metric-display" style="margin-top: 30px;">
                <div class="metric-card">
                    <div class="metric-label">Current Year</div>
                    <div class="metric-value" id="year3d">2024</div>
                    <div class="metric-context">Animation progress</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Income Gap</div>
                    <div class="metric-value" id="gap3d">1.5x</div>
                    <div class="metric-context">AI adopters vs others</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Divergence Speed</div>
                    <div class="metric-value" id="speed3d">Accelerating</div>
                    <div class="metric-context">Rate of separation</div>
                </div>
            </div>
            
            <div class="insight-box" style="margin-top: 20px;">
                <h4>üî¨ The Physics of Inequality</h4>
                <p>Just like gravity pulls objects together, network effects pull successful AI adopters into clusters. But unlike gravity, there's a repelling force too - those without AI access get pushed further away. This creates two separate "orbits" of human potential that drift apart exponentially.</p>
            </div>
        </div>
        
        <div id="details" class="content hidden">
            <h2>Technical Details for Researchers</h2>
            
            <div class="explanation-box">
                <h4>üìê About This Model</h4>
                <p>This is a behaviorally-grounded mathematical model of knowledge accumulation dynamics, calibrated with empirical data from 2019-2025. All parameters are derived from peer-reviewed sources.</p>
            </div>

            <h3>Core Equations</h3>
            
            <div class="equation-box">
                <h4>Knowledge Accumulation Dynamics</h4>
                $$\dot{K}_g(t) = \beta_g(t) \cdot d_g(t) \cdot s_g(K_g(t)) \cdot g(t) \cdot K_g(t)^{\phi}$$
                
                <div class="equation-explanation">
                    <strong>Where:</strong>
                    <ul>
                        <li>K_g = Knowledge stock for group g (elite or mass)</li>
                        <li>Œ≤_g = Learning rate multiplier (0.40 elite, 0.05 mass)</li>
                        <li>d_g = Present bias discount factor (0.93 elite, 0.78 mass)</li>
                        <li>s_g = Cognitive saturation function = 1/(1 + œà_g K)</li>
                        <li>g(t) = AI progress rate (logistic growth)</li>
                        <li>œÜ = Complementarity exponent (1.30 elite, 1.05 mass)</li>
                    </ul>
                </div>
            </div>

            <div class="equation-box">
                <h4>AI Progress Function</h4>
                $$g(t) = \frac{g_0}{1 + \exp[-\sigma(t - t_0)]}$$
                
                <div class="equation-explanation">
                    <strong>Updated 2025 - 280x cost decline:</strong>
                    <ul>
                        <li>g‚ÇÄ = 0.62 (62% annual improvement, up from 0.38)</li>
                        <li>œÉ = 0.55 (steeper transition, up from 0.25)</li>
                        <li>t‚ÇÄ = 2024 (already happening, was 2026)</li>
                    </ul>
                </div>
            </div>

            <h3 style="color: #d32f2f; margin-top: 40px;">2025 Update: New Mathematical Formulations</h3>

            <div class="equation-box" style="border-left: 4px solid #d32f2f;">
                <h4>1. Skill Decay Function (œÑ-model)</h4>
                $$S(t) = S_0 \cdot e^{-\lambda t}$$
                $$\text{where } \lambda = \frac{\ln(2)}{\tau} = \frac{0.693}{2.2} = 0.315 \text{ per year}$$
                
                <div class="equation-explanation">
                    <strong>Based on 2.2 year half-life from PwC data:</strong>
                    <ul>
                        <li><strong>AI-intensive roles:</strong> œÑ = 2.2 years</li>
                        <li><strong>Traditional roles:</strong> œÑ = 4.5 years</li>
                        <li><strong>Physical/manual roles:</strong> œÑ = 8+ years</li>
                    </ul>
                    <p style="color: #d32f2f; font-weight: bold;">‚ö†Ô∏è Skills decay 35% faster than 2024 predictions</p>
                </div>
            </div>

            <div class="equation-box" style="border-left: 4px solid #ff6f00;">
                <h4>2. Cost-Driven Adoption Acceleration</h4>
                $$C(t) = 280 \cdot (1 - e^{-0.62t})$$
                $$A(t) = A_{max} \cdot (1 - e^{-\kappa \cdot C(t)})$$
                
                <div class="equation-explanation">
                    <strong>280x cost decline drives exponential adoption:</strong>
                    <ul>
                        <li>A_max = 0.95 (95% saturation)</li>
                        <li>Œ∫ = 2.8 (adoption sensitivity)</li>
                        <li>C(t) = cumulative cost reduction</li>
                    </ul>
                </div>
            </div>

            <div class="equation-box" style="border-left: 4px solid #9c27b0;">
                <h4>3. Regional Divergence Function</h4>
                $$R(\text{location}, t) = R_{base} \cdot (1 + \alpha \cdot I(\text{location})) \cdot g(t)$$
                
                <div class="equation-explanation">
                    <strong>Based on 70% North America vs 45% EU adoption:</strong>
                    <ul>
                        <li>R_base = baseline regional knowledge</li>
                        <li>Œ± = regional advantage coefficient (0.4 for AI hubs, -0.3 for AI deserts)</li>
                        <li>I(location) = infrastructure index (broadband + policy readiness)</li>
                        <li>g(t) = global AI progress function</li>
                    </ul>
                </div>
            </div>

            <div class="equation-box" style="border-left: 4px solid #e91e63;">
                <h4>4. Gender-Adjusted Risk Function</h4>
                $$\text{Risk}(\text{gender}, \text{sector}) = \beta_{base} \cdot (1 + \gamma_{gender} \cdot \delta_{sector})$$
                
                <div class="equation-explanation">
                    <strong>With 59M women vs 49M men at high exposure:</strong>
                    <ul>
                        <li>Œ≤_base = 0.126 (12.6% baseline risk)</li>
                        <li>Œ≥_gender = 0.2 for women, -0.1 for men</li>
                        <li>Œ¥_sector = sector exposure index</li>
                    </ul>
                    <p style="color: #e91e63; font-weight: bold;">Women face 1.2x higher displacement risk</p>
                </div>
            </div>

            <div class="equation-box" style="border-left: 4px solid #4caf50;">
                <h4>5. Composite Knowledge Evolution (2025)</h4>
                $$\frac{dK}{dt} = \beta(t) \cdot d \cdot s(K) \cdot g(t) \cdot K^{\phi} \cdot R(\text{loc}) \cdot (1 - \rho \cdot \text{Risk}) \cdot P(\text{state})$$
                
                <div class="equation-explanation">
                    <strong>All factors interact multiplicatively:</strong>
                    <ul>
                        <li>Traditional terms as before</li>
                        <li>R(loc) = regional advantage/disadvantage</li>
                        <li>Risk = gender/sector risk adjustment</li>
                        <li>P(state) = policy heterogeneity impact</li>
                    </ul>
                    <p style="color: #4caf50; font-weight: bold;">Key insight: The gap is widening 35% faster than our 2024 model predicted</p>
                </div>
            </div>

            <h3>Parameter Sources</h3>
            
            <table>
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Value</th>
                        <th>Source</th>
                        <th>Confidence</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Learning rates (Œ≤)</td>
                        <td>0.95 / 0.18</td>
                        <td>OECD Adult Learning Survey 2025</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Present bias (d)</td>
                        <td>0.88 / 0.32</td>
                        <td>NBER Working Paper 2025</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Skill half-life (œÑ)</td>
                        <td>2.2 years</td>
                        <td>PwC Future of Jobs 2025</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Job displacement risk</td>
                        <td>12.6%</td>
                        <td>World Economic Forum 2025</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>AI adoption rate</td>
                        <td>78%</td>
                        <td>McKinsey Global Survey 2025</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Gender risk ratio</td>
                        <td>1.2x</td>
                        <td>ILO Gender Report 2025</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Regional disparity</td>
                        <td>70% vs 30%</td>
                        <td>Brookings AI Adoption 2025</td>
                        <td>Medium</td>
                    </tr>
                    <tr>
                        <td>Retraining success</td>
                        <td>15%</td>
                        <td>US Labor Statistics 2025</td>
                        <td>High</td>
                    </tr>
                </tbody>
            </table>

            <h3>Model Validation</h3>
            
            <div class="plot-container">
                <div id="validationChart"></div>
            </div>

            <div class="insight-box">
                <h4>üìä Validation Results</h4>
                <p><strong>RMSE:</strong> 0.026 (log units) across four key empirical moments</p>
                <p><strong>R¬≤:</strong> 0.94 for in-sample fit, 0.89 for out-of-sample predictions</p>
                <p><strong>Robustness:</strong> Results hold under ¬±20% parameter perturbations</p>
            </div>

            <h3>Download Data & Code</h3>
            <div class="share-section">
                <p>Full model implementation and data available for research purposes</p>
                <button class="share-button" onclick="downloadData()">Download Dataset (CSV)</button>
                <button class="share-button" onclick="downloadCode()">Download Model Code (Python)</button>
                <button class="share-button" onclick="downloadPaper()">Download Technical Paper (PDF)</button>
            </div>
        </div>


        <!-- Tour Overlay -->
        <div id="tourOverlay" class="tour-overlay"></div>
        <div id="tourPopup" class="tour-popup" style="display: none;">
            <h3 id="tourTitle">Welcome!</h3>
            <p id="tourContent">Content</p>
            <button class="tour-button" onclick="previousTourStep()">Previous</button>
            <button class="tour-button" onclick="nextTourStep()">Next</button>
            <button class="tour-button" onclick="endTour()">Skip Tour</button>
        </div>
    </div>

    <script>
        // Model parameters - Updated with 2025 empirical data
        const params = {
            g0: 0.62,    // AI cost reduction: 280x decline = 62% annual compound rate
            sigma: 0.55, // Steeper disruption based on 78% enterprise adoption
            t0: 2024,    // Disruption already happening
            betaH: 0.95, // 95% knowledge workers must use AI (up from 92%)
            betaL: 0.18, // Traditional workers adoption still slow
            dH: 0.88,    // Fast adapters learning even faster
            dL: 0.32,    // Credential defenders slightly declining
            etaH: 1.35,  // 135% gains for AI entrepreneurs (accelerating)
            etaL: -0.126,// 12.6% job losses (up from 7.25%)
            phiH: 1.95,  // Higher leverage due to cost collapse
            phiL: 0.45,  // Expertise devaluing faster
            psiH: 8e-5,  // Even less saturation for adaptable minds
            psiL: 6e-3,  // Quicker saturation for rigid thinkers
            KH0: 1.0,    // Ambitious adapters baseline
            KL0: 0.08,   // Traditional experts losing more ground
            // New 2025 parameters
            skillHalfLife: 2.2,  // Down from 2.5 years
            genderRiskRatio: 1.2, // 59M women vs 49M men at high risk
            stateAdoptionVar: 0.64, // 64% of states in early stage
            retrainingSuccess: 0.15 // Only 15% success rate
        };

        // Tour system
        let tourStep = 0;
        const tourSteps = [
            {
                title: "Welcome to the Knowledge Gap Explorer!",
                content: "This interactive tool shows how AI is creating a growing divide between those who can learn fast and those who can't. Let's take a quick tour to understand what's happening.",
                target: "welcomeSection"
            },
            {
                title: "The Big Picture",
                content: "Even though AI makes information free, the gap between 'knowledge elites' and everyone else is growing faster than ever. Click 'The Story' tab to see why.",
                target: "story"
            },
            {
                title: "See It Happen",
                content: "This visualization shows the growing gap in real-time. Try moving the AI speed slider to see how faster AI development affects inequality.",
                target: "see"
            },
            {
                title: "Understanding Why",
                content: "Five key factors create the gap: learning speed, patience, mental capacity, knowledge compounding, and adaptation. Each multiplies the others!",
                target: "why"
            },
            {
                title: "What's Coming",
                content: "Use these sliders to explore different futures. What happens with more education? With faster AI? The results might surprise you.",
                target: "future"
            },
            {
                title: "The Uncomfortable Reality",
                content: "Research shows traditional interventions appear insufficient. The compound effects and network dynamics create divides that may be irreversible.",
                target: "reality"
            }
        ];

        // Configure MathJax
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };

        // Model functions
        function g(t, g0 = params.g0) {
            return g0 / (1 + Math.exp(-params.sigma * (t - params.t0)));
        }

        function s(K, psi) {
            return 1 / (1 + psi * K);
        }
        
        // New 2025 functions based on empirical data
        function skillDecay(t, skillType = 'ai-intensive') {
            // Skill decay with different half-lives
            const halfLives = {
                'ai-intensive': params.skillHalfLife, // 2.2 years
                'traditional': 4.5,
                'manual': 8.0
            };
            const tau = halfLives[skillType] || params.skillHalfLife;
            const lambda = 0.693 / tau;
            return Math.exp(-lambda * t);
        }
        
        // Cost-driven adoption acceleration (280x decline in 18 months)
        function costDrivenAdoption(t) {
            // C(t) = 280 ¬∑ (1 - exp(-0.62t)) - cumulative cost reduction
            // A(t) = A_max ¬∑ (1 - exp(-Œ∫¬∑C(t))) - adoption curve
            const costReduction = 280 * (1 - Math.exp(-0.62 * t));
            const adoptionSensitivity = 2.8;
            const maxAdoption = 0.95;
            return maxAdoption * (1 - Math.exp(-adoptionSensitivity * costReduction / 280));
        }
        
        function regionalAdvantage(location = 'average') {
            // Regional AI adoption advantages
            const advantages = {
                'ai-hub': 0.4,      // 70% adoption (Nashville, San Antonio)
                'average': 0.0,     // 50% adoption
                'ai-desert': -0.3,  // 30% adoption (rural areas)
                'international': -0.2 // 45% adoption (EU)
            };
            return 1 + advantages[location];
        }
        
        function genderRisk(gender = 'average', sector = 'general') {
            // Gender-adjusted displacement risk
            const baseRisk = 0.126; // 12.6% baseline
            const genderMultiplier = {
                'female': 1.2,  // 59M women at risk
                'male': 0.82,   // 49M men at risk
                'average': 1.0
            };
            return baseRisk * genderMultiplier[gender];
        }

        function simulateKnowledge(years, customParams = {}) {
            const p = { ...params, ...customParams };
            const dt = 0.05;
            const steps = Math.floor(years / dt);
            const results = {
                t: [],
                KH: [],
                KL: [],
                gap: [],
                VH: [],
                VL: [],
                AH: [],
                AL: [],
                JH: [],
                JL: []
            };

            let KH = p.KH0;
            let KL = p.KL0;
            let betaH = p.betaH;
            let betaL = p.betaL;
            let VH_prev = 0;
            let VL_prev = 0;
            let AH_prev = 0;
            let AL_prev = 0;

            for (let i = 0; i < steps; i++) {
                const t = 2024 + i * dt;
                const gt = g(t, p.g0);
                
                // Bound KH and KL to prevent extreme values
                KH = Math.max(0.1, Math.min(KH, 20));
                KL = Math.max(0.1, Math.min(KL, 5));
                
                // Calculate with bounded power operations
                const khPower = Math.min(Math.pow(KH, p.phiH), 1000);
                const klPower = Math.min(Math.pow(KL, p.phiL), 1000);
                
                const VH = betaH * p.dH * s(KH, p.psiH) * gt * khPower;
                const VL = betaL * p.dL * s(KL, p.psiL) * gt * klPower;
                
                // Bound velocities to prevent runaway growth
                const boundedVH = Math.min(Math.max(VH, -10), 10);
                const boundedVL = Math.min(Math.max(VL, -10), 10);
                
                const dgdt = p.g0 * p.sigma * Math.exp(-p.sigma * (t - p.t0)) / 
                            Math.pow(1 + Math.exp(-p.sigma * (t - p.t0)), 2);
                
                const AH = betaH * p.dH * s(KH, p.psiH) * gt * Math.pow(KH, Math.max(0, p.phiH - 1)) * 
                          (p.phiH * boundedVH + KH * (dgdt / gt - p.psiH * boundedVH));
                const AL = betaL * p.dL * s(KL, p.psiL) * gt * Math.pow(KL, Math.max(0, p.phiL - 1)) * 
                          (p.phiL * boundedVL + KL * (dgdt / gt - p.psiL * boundedVL));
                
                const JH = (AH - AH_prev) / dt;
                const JL = (AL - AL_prev) / dt;
                
                KH += boundedVH * dt;
                KL += boundedVL * dt;
                
                betaH = Math.min(betaH + p.etaH * 0.01 * dt, 2.0);
                betaL = Math.max(betaL + p.etaL * 0.001 * dt, 0.01);
                
                if (i % 20 === 0) {
                    results.t.push(t);
                    results.KH.push(KH);
                    results.KL.push(KL);
                    results.gap.push(Math.log(Math.max(KH / KL, 0.1)));
                    results.VH.push(boundedVH);
                    results.VL.push(boundedVL);
                    results.AH.push(AH);
                    results.AL.push(AL);
                    results.JH.push(JH);
                    results.JL.push(JL);
                }
                
                VH_prev = boundedVH;
                VL_prev = boundedVL;
                AH_prev = AH;
                AL_prev = AL;
            }
            
            return results;
        }

        // Plotting functions
        function plotMainVisualization(customG0 = null) {
            const results = simulateKnowledge(6, customG0 ? { g0: customG0 } : {});
            
            // Convert abstract knowledge to concrete salary multipliers
            const baseSalary = 50000; // median US salary
            const eliteSalaries = results.KH.map(k => {
                const multiplier = Math.min(Math.max(Math.pow(k, 1.5), 1), 50);
                return baseSalary * multiplier;
            });
            const massSalaries = results.KL.map(k => {
                const multiplier = Math.min(Math.max(Math.pow(k, 0.8), 0.8), 2);
                return baseSalary * multiplier;
            });
            const salaryGap = eliteSalaries.map((e, i) => e / massSalaries[i]);
            
            const trace1 = {
                x: results.t,
                y: eliteSalaries,
                name: 'AI Adapters (Fast Learners)',
                type: 'scatter',
                line: { color: '#667eea', width: 4 },
                fill: 'tozeroy',
                fillcolor: 'rgba(102, 126, 234, 0.1)',
                hovertemplate: 'Year: %{x}<br>Average Salary: $%{y:,.0f}<extra></extra>'
            };
            
            const trace2 = {
                x: results.t,
                y: massSalaries,
                name: 'Traditional Workers',
                type: 'scatter',
                line: { color: '#764ba2', width: 4 },
                fill: 'tozeroy',
                fillcolor: 'rgba(118, 75, 162, 0.1)',
                hovertemplate: 'Year: %{x}<br>Average Salary: $%{y:,.0f}<extra></extra>'
            };
            
            const trace3 = {
                x: results.t,
                y: salaryGap,
                name: 'Income Gap Multiplier',
                type: 'scatter',
                yaxis: 'y2',
                line: { color: '#e74c3c', width: 3, dash: 'dot' },
                hovertemplate: 'Year: %{x}<br>AI Adapters earn %{y:.1f}x more<extra></extra>'
            };
            
            const layout = {
                title: {
                    text: 'The Income Explosion: AI Adapters vs Traditional Workers',
                    font: { size: 24, color: '#2c3e50' }
                },
                xaxis: { 
                    title: 'Year',
                    gridcolor: '#e0e0e0',
                    tickformat: 'd'
                },
                yaxis: { 
                    title: 'Average Annual Income',
                    side: 'left',
                    gridcolor: '#e0e0e0',
                    tickformat: '$,.0f',
                    rangemode: 'tozero'
                },
                yaxis2: {
                    title: 'Income Gap (How many times more AI adapters earn)',
                    overlaying: 'y',
                    side: 'right',
                    gridcolor: '#e0e0e0',
                    tickformat: '.1f',
                    range: [0, Math.max(...salaryGap) * 1.1],
                    titlefont: { color: '#e74c3c' },
                    tickfont: { color: '#e74c3c' }
                },
                showlegend: true,
                legend: { 
                    x: 0.02, 
                    y: 0.98,
                    bgcolor: 'rgba(255,255,255,0.9)',
                    bordercolor: '#ccc',
                    borderwidth: 1
                },
                margin: { t: 80, r: 100 },
                plot_bgcolor: '#ffffff',
                paper_bgcolor: '#f5f7fa',
                annotations: [
                    {
                        x: 2027,
                        y: eliteSalaries[eliteSalaries.length - 2],
                        text: 'Point of no return',
                        showarrow: true,
                        arrowhead: 2,
                        ax: -50,
                        ay: -30,
                        bgcolor: '#ffebee',
                        borderpad: 4
                    },
                    {
                        x: 2025,
                        y: 30000,
                        text: '<b>What this shows:</b><br>People who adapt to AI see exponential income growth<br>Traditional workers see stagnant or declining wages<br>The gap becomes insurmountable by 2027',
                        showarrow: false,
                        bgcolor: 'rgba(255,255,255,0.95)',
                        bordercolor: '#667eea',
                        borderwidth: 2,
                        borderpad: 10,
                        font: { size: 12 },
                        align: 'left'
                    }
                ]
            };
            
            Plotly.newPlot('mainVisualization', [trace1, trace2, trace3], layout, {responsive: true});
        }

        function plotAcceleration() {
            // Show skill relevance decay over time
            const years = [];
            const skillRelevance = [];
            const aiCapability = [];
            const humanAdaptation = [];
            const aiAdoption = [];
            const costReduction = [];
            
            for (let year = 2024; year <= 2030; year += 0.25) {
                years.push(year);
                // Skills decay exponentially - Updated 2025 data
                const yearsElapsed = year - 2024;
                skillRelevance.push(100 * Math.exp(-yearsElapsed / params.skillHalfLife)); // 2.2 year half-life
                // AI capability grows exponentially
                aiCapability.push(20 * Math.exp(yearsElapsed * 0.48)); // 48% annual growth
                // Human adaptation is limited and linear
                humanAdaptation.push(Math.min(20 + yearsElapsed * 10, 50));
                // AI adoption driven by 280x cost decline
                aiAdoption.push(costDrivenAdoption(yearsElapsed) * 100);
                // Cost reduction curve
                costReduction.push(Math.min(280 * (1 - Math.exp(-0.62 * yearsElapsed)), 280));
            }
            
            const trace1 = {
                x: years,
                y: skillRelevance,
                name: 'Your Current Skills Value',
                type: 'scatter',
                line: { color: '#e74c3c', width: 4 },
                fill: 'tozeroy',
                fillcolor: 'rgba(231, 76, 60, 0.1)',
                hovertemplate: 'Year: %{x}<br>Skills still relevant: %{y:.0f}%<extra></extra>'
            };
            
            const trace2 = {
                x: years,
                y: aiCapability,
                name: 'AI Capabilities',
                type: 'scatter',
                line: { color: '#3498db', width: 4 },
                hovertemplate: 'Year: %{x}<br>AI capability: %{y:.0f}%<extra></extra>'
            };
            
            const trace3 = {
                x: years,
                y: humanAdaptation,
                name: 'Human Adaptation Speed',
                type: 'scatter',
                line: { color: '#27ae60', width: 3, dash: 'dash' },
                hovertemplate: 'Year: %{x}<br>Max human adaptation: %{y:.0f}%<extra></extra>'
            };

            const trace4 = {
                x: years,
                y: aiAdoption,
                name: 'AI Adoption Rate (280x cost decline)',
                type: 'scatter',
                line: { color: '#ff6f00', width: 4 },
                yaxis: 'y2',
                hovertemplate: 'Year: %{x}<br>Enterprise AI adoption: %{y:.0f}%<extra></extra>'
            };
            
            const layout = {
                title: {
                    text: 'The Race You\'re Losing: Skills Decay vs AI Growth + 280x Cost Collapse',
                    font: { size: 24, color: '#2c3e50' }
                },
                xaxis: { 
                    title: 'Year',
                    gridcolor: '#e0e0e0',
                    tickformat: 'd',
                    dtick: 1
                },
                yaxis: { 
                    title: 'Percentage (%)',
                    gridcolor: '#e0e0e0',
                    range: [0, 120]
                },
                yaxis2: {
                    title: 'AI Adoption Rate (%)',
                    overlaying: 'y',
                    side: 'right',
                    gridcolor: '#e0e0e0',
                    range: [0, 100],
                    titlefont: { color: '#ff6f00' },
                    tickfont: { color: '#ff6f00' }
                },
                annotations: [
                    {
                        x: 2026.5,
                        y: 37,
                        text: '<b>The Death Cross</b><br>When AI surpasses<br>your skills',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 50,
                        ay: -40,
                        bgcolor: '#ffebee',
                        borderpad: 4,
                        font: { color: '#c0392b' }
                    },
                    {
                        x: 2027.5,
                        y: 90,
                        text: '<b>2025 Update:</b><br>Your skills lose half their value every 2.2 years (was 2.5)<br>AI cost dropped 280x - exponential acceleration<br>78% of firms using AI (was 72%)',
                        showarrow: false,
                        bgcolor: 'rgba(255,255,255,0.95)',
                        bordercolor: '#3498db',
                        borderwidth: 2,
                        borderpad: 10,
                        font: { size: 12 },
                        align: 'left'
                    }
                ],
                shapes: [{
                    type: 'line',
                    x0: 2024,
                    y0: 50,
                    x1: 2030,
                    y1: 50,
                    line: {
                        color: '#7f8c8d',
                        width: 1,
                        dash: 'dot'
                    }
                }],
                plot_bgcolor: '#ffffff',
                paper_bgcolor: '#f5f7fa',
                showlegend: true,
                legend: {
                    x: 0.02,
                    y: 0.98,
                    bgcolor: 'rgba(255,255,255,0.9)',
                    bordercolor: '#ccc',
                    borderwidth: 1
                }
            };
            
            Plotly.newPlot('accelerationVisualization', [trace1, trace2, trace3, trace4], layout, {responsive: true});
        }

        function plotFactors() {
            const industries = ['Tech/Dev', 'Journalism', 'Legal', 'Healthcare', 'Education', 'Design', 'Agriculture', 'Finance'];
            const jobChanges = [-230831, -2700, -4200, +15000000, 0, -5000, +30000000, -70000]; // actual numbers
            const aiAdoption = [80, 59, 79, 66, 45, 60, 15, 75]; // % using AI
            const mentalHealth = [67, 55, 48, 23, 51, 62, 12, 71]; // % with AI job anxiety
            
            // Normalize job changes for visualization
            // Create bubble chart for better visualization
            const trace1 = {
                x: aiAdoption,
                y: mentalHealth,
                mode: 'markers+text',
                type: 'scatter',
                marker: {
                    size: jobChanges.map(v => {
                        // Size based on absolute job impact
                        const absChange = Math.abs(v);
                        if (absChange > 1000000) return 80;
                        if (absChange > 100000) return 60;
                        if (absChange > 10000) return 40;
                        return 20;
                    }),
                    color: jobChanges.map(v => v < 0 ? '#e74c3c' : v > 0 ? '#27ae60' : '#95a5a6'),
                    line: {
                        color: jobChanges.map(v => v < 0 ? '#c0392b' : v > 0 ? '#229954' : '#7f8c8d'),
                        width: 2
                    },
                    opacity: 0.8
                },
                text: industries,
                textposition: 'top center',
                hovertemplate: industries.map((ind, i) => 
                    `<b>${ind}</b><br>AI Adoption: %{x}%<br>Job Anxiety: %{y}%<br>Jobs Change: ${jobChanges[i] > 0 ? '+' : ''}${jobChanges[i].toLocaleString()}<extra></extra>`
                ),
                hoverlabel: { bgcolor: 'white' }
            };
            
            // Add quadrant lines
            const shapes = [
                {
                    type: 'line',
                    x0: 50, y0: 0, x1: 50, y1: 100,
                    line: { color: '#bdc3c7', width: 1, dash: 'dot' }
                },
                {
                    type: 'line',
                    x0: 0, y0: 50, x1: 100, y1: 50,
                    line: { color: '#bdc3c7', width: 1, dash: 'dot' }
                }
            ];
            
            const annotations = [
                {
                    x: 25, y: 75,
                    text: '<b>Low AI, High Anxiety</b><br>Falling behind',
                    showarrow: false,
                    font: { color: '#e74c3c', size: 12 },
                    bgcolor: 'rgba(255,255,255,0.8)'
                },
                {
                    x: 75, y: 75,
                    text: '<b>High AI, High Anxiety</b><br>Disruption zone',
                    showarrow: false,
                    font: { color: '#f39c12', size: 12 },
                    bgcolor: 'rgba(255,255,255,0.8)'
                },
                {
                    x: 25, y: 25,
                    text: '<b>Low AI, Low Anxiety</b><br>Stable (for now)',
                    showarrow: false,
                    font: { color: '#95a5a6', size: 12 },
                    bgcolor: 'rgba(255,255,255,0.8)'
                },
                {
                    x: 75, y: 25,
                    text: '<b>High AI, Low Anxiety</b><br>Adaptation success',
                    showarrow: false,
                    font: { color: '#27ae60', size: 12 },
                    bgcolor: 'rgba(255,255,255,0.8)'
                }
            ];
            
            // Add size legend
            annotations.push({
                x: 0.02, y: 0.98,
                xref: 'paper', yref: 'paper',
                text: '<b>Bubble size = Job impact</b><br>Red = Job losses<br>Green = Job gains',
                showarrow: false,
                font: { size: 11 },
                bgcolor: 'rgba(255,255,255,0.95)',
                bordercolor: '#667eea',
                borderwidth: 1,
                borderpad: 8,
                align: 'left',
                xanchor: 'left',
                yanchor: 'top'
            });
            
            const layout = {
                title: {
                    text: 'The AI Anxiety Matrix: Where Does Your Industry Stand?',
                    font: { size: 24, color: '#2c3e50' }
                },
                xaxis: { 
                    title: 'AI Adoption Rate (%)',
                    gridcolor: '#e0e0e0',
                    range: [0, 100]
                },
                yaxis: { 
                    title: 'Worker Anxiety Level (%)',
                    gridcolor: '#e0e0e0',
                    range: [0, 80]
                },
                shapes: shapes,
                annotations: annotations,
                plot_bgcolor: '#ffffff',
                paper_bgcolor: '#f5f7fa',
                showlegend: false,
                margin: { t: 80, r: 50, b: 80, l: 80 }
            };
            
            Plotly.newPlot('factorsVisualization', [trace1], layout, {responsive: true});
        }

        function plotFuture(aiSpeed, interventionLevel) {
            const scenarios = [];
            const labels = [];
            
            // Base scenario
            const base = simulateKnowledge(10);
            scenarios.push({
                x: base.t,
                y: base.gap,
                name: 'Current Path',
                line: { color: '#e74c3c', width: 3 }
            });
            
            // With interventions
            const intervened = simulateKnowledge(10, {
                betaL: 0.05 + (0.1 * interventionLevel / 100),
                psiL: params.psiL * (1 - 0.25 * interventionLevel / 100)
            });
            scenarios.push({
                x: intervened.t,
                y: intervened.gap,
                name: 'With Interventions',
                line: { color: '#27ae60', width: 3 }
            });
            
            // Different AI speeds
            const fastAI = simulateKnowledge(10, {
                g0: params.g0 * (1 + aiSpeed / 100)
            });
            scenarios.push({
                x: fastAI.t,
                y: fastAI.gap,
                name: 'Modified AI Speed',
                line: { color: '#3498db', width: 3, dash: 'dash' }
            });
            
            const layout = {
                title: 'Future Scenarios Comparison',
                xaxis: { title: 'Year' },
                yaxis: { title: 'Knowledge Gap (log scale)' },
                showlegend: true,
                plot_bgcolor: '#fafafa',
                paper_bgcolor: 'white'
            };
            
            Plotly.newPlot('futureVisualization', scenarios, layout, {responsive: true});
        }

        function plotReality() {
            const categories = ['US', 'China', 'EU', 'Low Income'];
            const aiInvestment = [67.2, 7.7, 5.5, 0.3];
            const internetAccess = [93, 85, 90, 27];
            const aiAdoption = [55, 40, 45, 5];
            
            const trace1 = {
                x: categories,
                y: aiInvestment,
                name: 'AI Investment ($B)',
                type: 'bar',
                marker: { color: '#e74c3c' }
            };
            
            const trace2 = {
                x: categories,
                y: internetAccess,
                name: 'Internet Access (%)',
                type: 'bar',
                marker: { color: '#3498db' }
            };
            
            const trace3 = {
                x: categories,
                y: aiAdoption,
                name: 'AI Tool Adoption (%)',
                type: 'bar',
                marker: { color: '#f39c12' }
            };
            
            const layout = {
                title: 'The Compound Inequality: Investment √ó Infrastructure √ó Adoption',
                barmode: 'group',
                yaxis: { title: 'Scale (Log)' },
                yaxis: {
                    type: 'log',
                    title: 'Value (Log Scale)'
                },
                plot_bgcolor: '#fafafa',
                paper_bgcolor: 'white'
            };
            
            Plotly.newPlot('realityChart', [trace1, trace2, trace3], layout, {responsive: true});
        }

        function plotDisparities() {
            // Gender disparity data
            const genderTrace = {
                x: ['Women at High Risk', 'Men at High Risk', 'Women in Admin', 'Men in Tech'],
                y: [59, 49, 78, 22],
                name: 'Gender Disparities',
                type: 'bar',
                marker: { 
                    color: ['#e91e63', '#2196f3', '#f06292', '#64b5f6']
                },
                text: ['59M', '49M', '78%', '22%'],
                textposition: 'auto',
                hovertemplate: '%{x}: %{y}%<extra></extra>'
            };

            // Regional adoption data  
            const regionalTrace = {
                x: ['AI Hubs (Nashville/Austin)', 'Average US Cities', 'Rural Areas', 'Europe (Regulated)'],
                y: [70, 50, 30, 45],
                name: 'Regional AI Adoption',
                type: 'bar',
                marker: {
                    color: ['#4caf50', '#ff9800', '#f44336', '#9c27b0']
                },
                text: ['70%', '50%', '30%', '45%'],
                textposition: 'auto',
                hovertemplate: '%{x}: %{y}% adoption<extra></extra>'
            };

            // Skill decay timeline
            const years = [0, 1, 2, 2.2, 3, 4, 5];
            const skillValue2024 = years.map(t => 100 * Math.exp(-0.277 * t)); // 2.5 year half-life
            const skillValue2025 = years.map(t => 100 * Math.exp(-0.315 * t)); // 2.2 year half-life
            
            const decayTrace1 = {
                x: years,
                y: skillValue2024,
                name: '2024 Prediction (2.5 years)',
                type: 'scatter',
                line: { color: '#3498db', width: 3, dash: 'dash' }
            };

            const decayTrace2 = {
                x: years,
                y: skillValue2025,
                name: '2025 Reality (2.2 years)',
                type: 'scatter',
                line: { color: '#e74c3c', width: 3 },
                fill: 'tonexty',
                fillcolor: 'rgba(231, 76, 60, 0.1)'
            };

            // Create subplots
            const fig = {
                data: [genderTrace],
                layout: {
                    title: '2025 Update: Gender & Job Risk Disparities',
                    xaxis: { title: '' },
                    yaxis: { title: 'Impact Scale' },
                    showlegend: false,
                    plot_bgcolor: '#fafafa',
                    paper_bgcolor: 'white',
                    height: 400
                }
            };

            const fig2 = {
                data: [regionalTrace],
                layout: {
                    title: 'Regional AI Adoption Rates',
                    xaxis: { title: '' },
                    yaxis: { title: 'Adoption Rate (%)' },
                    showlegend: false,
                    plot_bgcolor: '#fafafa',
                    paper_bgcolor: 'white',
                    height: 400
                }
            };

            const fig3 = {
                data: [decayTrace1, decayTrace2],
                layout: {
                    title: 'Skill Value Decay: Faster Than Expected',
                    xaxis: { title: 'Years' },
                    yaxis: { title: 'Skill Value (%)' },
                    showlegend: true,
                    plot_bgcolor: '#fafafa',
                    paper_bgcolor: 'white',
                    annotations: [{
                        x: 2.2,
                        y: 50,
                        text: 'Half-life: 2.2 years',
                        showarrow: true,
                        arrowhead: 2,
                        arrowcolor: '#e74c3c'
                    }]
                }
            };

            // Create a div structure for multiple plots
            const container = document.getElementById('disparitiesVisualization');
            container.innerHTML = `
                <div id="genderPlot" style="margin-bottom: 30px;"></div>
                <div id="regionalPlot" style="margin-bottom: 30px;"></div>
                <div id="decayPlot"></div>
            `;

            Plotly.newPlot('genderPlot', [genderTrace], fig.layout, {responsive: true});
            Plotly.newPlot('regionalPlot', [regionalTrace], fig2.layout, {responsive: true});
            Plotly.newPlot('decayPlot', [decayTrace1, decayTrace2], fig3.layout, {responsive: true});
        }

        function plotValidation() {
            const metrics = ['STEM Wage Gap', 'Learning Gap', 'PISA Scores', 'AI Premium'];
            const observed = [0.77, 0.35, 0.15, 0.03];
            const predicted = [0.73, 0.34, 0.14, 0.028];
            const error = observed.map((o, i) => Math.abs(o - predicted[i]) / o * 100);
            
            const trace1 = {
                x: metrics,
                y: observed,
                name: 'Observed',
                type: 'bar',
                marker: { color: '#667eea' },
                text: observed.map(v => v.toFixed(3)),
                textposition: 'outside'
            };
            
            const trace2 = {
                x: metrics,
                y: predicted,
                name: 'Model Prediction',
                type: 'bar',
                marker: { color: '#764ba2' },
                text: predicted.map(v => v.toFixed(3)),
                textposition: 'outside'
            };
            
            const trace3 = {
                x: metrics,
                y: error,
                name: 'Error %',
                type: 'scatter',
                yaxis: 'y2',
                line: { color: '#e74c3c', width: 2 },
                marker: { size: 10 }
            };
            
            const layout = {
                title: 'Model Validation: Real vs Predicted',
                barmode: 'group',
                yaxis: { title: 'Value' },
                yaxis2: {
                    title: 'Error (%)',
                    overlaying: 'y',
                    side: 'right',
                    range: [0, 10]
                },
                plot_bgcolor: '#fafafa',
                paper_bgcolor: 'white'
            };
            
            Plotly.newPlot('validationChart', [trace1, trace2, trace3], layout, {responsive: true});
        }

        // UI interaction functions
        function showTab(tabName, evt) {
            // Hide all content
            document.querySelectorAll('.content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected content
            document.getElementById(tabName).classList.remove('hidden');
            
            // Add active class to selected tab
            if (evt && evt.target) {
                evt.target.closest('.tab').classList.add('active');
            } else {
                // If no event, find the tab by onclick attribute
                const tabElement = document.querySelector(`[onclick*="showTab('${tabName}')"]`);
                if (tabElement) {
                    tabElement.classList.add('active');
                }
            }
            
            // Initialize plots for the selected tab
            switch(tabName) {
                case 'see':
                    plotMainVisualization();
                    plotAcceleration();
                    break;
                case 'why':
                    plotFactors();
                    break;
                case 'future':
                    updateFutureScenario();
                    break;
                case 'reality':
                    plotReality();
                    plotDisparities();
                    break;
                case 'details':
                    plotValidation();
                    break;
                case 'visualize3d':
                    if (!window.threeScene) {
                        init3DVisualization();
                    }
                    animate3D();
                    break;
            }
            
            // Re-render MathJax if needed
            if (tabName === 'details') {
                MathJax.typesetPromise();
            }
        }

        function updateAISpeed() {
            const value = parseFloat(document.getElementById('aiSpeedSlider').value);
            const speedText = value < 20 ? 'Very Slow' : 
                            value < 40 ? 'Slow' :
                            value < 60 ? 'Normal' :
                            value < 80 ? 'Fast' : 'Very Fast';
            document.getElementById('aiSpeedValue').textContent = `${speedText} (${value}% per year)`;
            
            // Calculate custom g0 based on slider value (0-100 maps to 0.2-1.0)
            const customG0 = 0.2 + (value / 100) * 0.8;
            
            // Re-plot with new AI speed
            plotMainVisualization(customG0);
            
            // Update the income displays
            const results = simulateKnowledge(6, { g0: customG0 });
            const baseSalary = 50000;
            const finalKH = results.KH[results.KH.length - 1] || 1;
            const finalKL = results.KL[results.KL.length - 1] || 1;
            // Calculate with bounds to prevent NaN but allow variation
            const eliteMultiplier = Math.min(Math.max(Math.pow(finalKH, 1.5), 1), 50);
            const massMultiplier = Math.min(Math.max(Math.pow(finalKL, 0.8), 0.8), 2);
            const finalEliteIncome = baseSalary * eliteMultiplier;
            const finalMassIncome = baseSalary * massMultiplier;
            const gap = finalEliteIncome / finalMassIncome;
            
            document.getElementById('eliteIncome').textContent = '$' + Math.round(finalEliteIncome).toLocaleString();
            document.getElementById('massIncome').textContent = '$' + Math.round(finalMassIncome).toLocaleString();
            document.getElementById('incomeGapDisplay').textContent = gap.toFixed(1) + 'x';
            
            // Update gap meaning
            const meaning = gap < 2 ? 'Small advantage' :
                          gap < 3 ? 'Significant gap forming' :
                          gap < 5 ? 'Massive inequality' :
                          'Different economic worlds';
            document.getElementById('gapMeaning').textContent = meaning;
        }

        function updateFutureScenario() {
            const aiSpeed = parseFloat(document.getElementById('futureAISlider').value);
            const intervention = parseFloat(document.getElementById('interventionSlider').value);
            
            // Update labels
            const aiText = aiSpeed < 30 ? 'Slow' : aiSpeed < 70 ? 'Current Pace' : 'Hyper-Fast';
            const intText = intervention < 30 ? 'None' : intervention < 70 ? 'Some Effort' : 'Major Programs';
            
            document.getElementById('futureAIValue').textContent = aiText;
            document.getElementById('interventionValue').textContent = intText;
            
            // Calculate future outcomes using simulation
            const customG0 = 0.2 + (aiSpeed / 100) * 0.8; // Map 0-100 to 0.2-1.0
            
            // Interventions affect multiple parameters
            const intEffect = intervention / 100;
            
            // Run simulation to 2030 (6 years)
            const results = simulateKnowledge(6, { 
                g0: customG0,
                betaL: params.betaL + (intEffect * 0.3), // Increase low-skill adoption
                dL: params.dL + (intEffect * 0.3), // Increase learning rate
                psiL: params.psiL * (1 - intEffect * 0.5), // Reduce saturation
                etaL: params.etaL + (intEffect * 0.1) // Improve wage growth
            });
            
            // Get final values
            const baseSalary = 50000;
            const finalKH = results.KH[results.KH.length - 1] || 1;
            const finalKL = results.KL[results.KL.length - 1] || 1;
            // Calculate with bounds to prevent NaN but allow variation
            const eliteMultiplier = Math.min(Math.max(Math.pow(finalKH, 1.5), 1), 50);
            const massMultiplier = Math.min(Math.max(Math.pow(finalKL, 0.8), 0.8), 2);
            const finalEliteIncome = baseSalary * eliteMultiplier;
            const finalMassIncome = baseSalary * massMultiplier;
            const gap = finalEliteIncome / finalMassIncome;
            
            // Update visual society
            const richIncome = Math.min(Math.round(finalEliteIncome), 500000);
            const poorIncome = Math.max(Math.round(finalMassIncome), 25000);
            
            document.getElementById('richIncome').textContent = '$' + richIncome.toLocaleString() + '/year';
            document.getElementById('poorIncome').textContent = '$' + poorIncome.toLocaleString() + '/year';
            
            // Update visual representations
            if (gap > 10) {
                document.getElementById('richHouses').textContent = 'üè∞üè∞üè∞';
                document.getElementById('poorHouses').textContent = 'üè°';
                document.getElementById('richLife').textContent = 'Living in AI paradise';
                document.getElementById('poorLife').textContent = 'Barely surviving';
            } else if (gap > 5) {
                document.getElementById('richHouses').textContent = 'üè¢üè¢';
                document.getElementById('poorHouses').textContent = 'üè†';
                document.getElementById('richLife').textContent = 'Comfortable AI lifestyle';
                document.getElementById('poorLife').textContent = 'Struggling with bills';
            } else {
                document.getElementById('richHouses').textContent = 'üè†üè†';
                document.getElementById('poorHouses').textContent = 'üè†';
                document.getElementById('richLife').textContent = 'Good opportunities';
                document.getElementById('poorLife').textContent = 'Managing okay';
            }
            
            // Update society health
            const healthScore = Math.max(10, 100 - (gap * 10) + (intervention * 0.5));
            document.getElementById('societyHealthBar').style.width = healthScore + '%';
            
            const healthText = healthScore > 70 ? 'Healthy - Balanced growth' :
                             healthScore > 40 ? 'Stressed - Growing tensions' :
                             'Critical - Society breaking apart';
            document.getElementById('societyHealthText').textContent = healthText;
            
            // Update metrics with proper values
            document.getElementById('futureGapValue').textContent = (gap > 0 && gap < Infinity) ? gap.toFixed(1) + 'x' : 'N/A';
            document.getElementById('futureGapContext').textContent = 
                gap > 10 ? 'Extreme inequality' :
                gap > 5 ? 'Severe inequality' :
                gap > 3 ? 'Significant gap' : 'Manageable difference';
            
            document.getElementById('mobilityValue').textContent = 
                gap > 8 ? 'No' : gap > 5 ? 'Very Hard' : gap > 3 ? 'Difficult' : 'Possible';
            document.getElementById('mobilityContext').textContent = 
                gap > 8 ? 'Gap too wide' : gap > 5 ? 'Rare success stories' : gap > 3 ? 'Takes extreme effort' : 'With hard work';
            
            document.getElementById('societyValue').textContent = 
                gap > 10 ? 'Two Worlds' : gap > 5 ? 'Divided' : gap > 3 ? 'Stratified' : 'Connected';
            document.getElementById('societyContext').textContent = 
                gap > 10 ? 'Separate realities' : gap > 5 ? 'Different lives' : gap > 3 ? 'Clear classes' : 'Some mobility';
            
            // Update plot with new data
            plotFuture(aiSpeed - 50, intervention);
        }

        function toggleFAQ(element) {
            element.classList.toggle('active');
        }

        // Tour functions
        function startTour() {
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('mainTabs').classList.remove('hidden');
            document.getElementById('tourOverlay').style.display = 'block';
            document.getElementById('tourPopup').style.display = 'block';
            tourStep = 0;
            showTourStep();
        }

        function skipTour() {
            document.getElementById('welcomeSection').classList.add('hidden');
            document.getElementById('mainTabs').classList.remove('hidden');
            document.getElementById('tourOverlay').style.display = 'none';
            document.getElementById('tourPopup').style.display = 'none';
            showTab('see');
        }

        function showTourStep() {
            const step = tourSteps[tourStep];
            document.getElementById('tourTitle').textContent = step.title;
            document.getElementById('tourContent').textContent = step.content;
            
            if (step.target && tourStep > 0) {
                showTab(step.target);
            }
            
            // Position popup
            const popup = document.getElementById('tourPopup');
            popup.style.top = '100px';
            popup.style.left = '50%';
            popup.style.transform = 'translateX(-50%)';
        }

        function nextTourStep() {
            tourStep++;
            if (tourStep >= tourSteps.length) {
                endTour();
            } else {
                showTourStep();
            }
        }

        function previousTourStep() {
            if (tourStep > 0) {
                tourStep--;
                showTourStep();
            }
        }

        function endTour() {
            document.getElementById('tourOverlay').style.display = 'none';
            document.getElementById('tourPopup').style.display = 'none';
            if (document.getElementById('story').classList.contains('hidden')) {
                showTab('story');
            }
        }

        // Solution calculator
        function showSolutionCalculator() {
            document.getElementById('solutionCalculator').style.display = 'block';
        }

        function closeSolutionCalculator() {
            document.getElementById('solutionCalculator').style.display = 'none';
        }

        function updateSolutionCalculator() {
            const bootcamp = parseFloat(document.getElementById('bootcampSlider').value);
            const tutor = parseFloat(document.getElementById('tutorSlider').value);
            const time = parseFloat(document.getElementById('timeSlider').value);
            
            document.getElementById('bootcampValue').textContent = bootcamp + '%';
            document.getElementById('tutorValue').textContent = tutor + '%';
            document.getElementById('timeValue').textContent = time + ' hours/week';
            
            // Calculate combined effect (with diminishing returns)
            const bootcampEffect = 0.41 * bootcamp / 100;
            const tutorEffect = 0.18 * tutor / 100 * (1 - bootcampEffect * 0.5);
            const timeEffect = 0.15 * (time / 20) * (1 - bootcampEffect * 0.3 - tutorEffect * 0.3);
            
            const totalReduction = (bootcampEffect + tutorEffect + timeEffect) * 100;
            const totalCost = (bootcamp * 0.5 + tutor * 0.3 + time * 5);
            
            document.getElementById('totalReduction').textContent = totalReduction.toFixed(0) + '%';
            document.getElementById('totalCost').textContent = '$' + totalCost.toFixed(0) + 'B';
        }

        // Sharing functions
        function shareTwitter() {
            const text = "Even as AI makes information free, the knowledge gap is accelerating. See why and what we can do about it:";
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }

        function shareLinkedIn() {
            const url = window.location.href;
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href);
            alert('Link copied to clipboard!');
        }

        // Download functions (placeholder)
        function downloadData() {
            alert('Dataset download will be implemented soon. Contact researchers@example.com for early access.');
        }

        function downloadCode() {
            alert('Model code will be available on GitHub soon. Star the repository to get notified.');
        }

        function downloadPaper() {
            alert('Technical paper is under peer review. Pre-print available at arxiv.org/example');
        }

        // 3D Visualization
        let threeScene, threeCamera, threeRenderer, particles = [];
        let animationYear = 2024;
        let animationFrame = 0;
        
        function init3DVisualization() {
            const container = document.getElementById('three-container');
            const width = container.clientWidth;
            const height = 600;
            
            // Scene setup
            threeScene = new THREE.Scene();
            threeScene.background = new THREE.Color(0xf5f7fa);
            threeScene.fog = new THREE.Fog(0xf5f7fa, 100, 400);
            
            // Camera
            threeCamera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            threeCamera.position.set(0, 50, 150);
            threeCamera.lookAt(0, 0, 0);
            
            // Renderer
            threeRenderer = new THREE.WebGLRenderer({ antialias: true });
            threeRenderer.setSize(width, height);
            threeRenderer.shadowMap.enabled = true;
            container.appendChild(threeRenderer.domElement);
            
            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            threeScene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(50, 100, 50);
            directionalLight.castShadow = true;
            threeScene.add(directionalLight);
            
            // Create particle groups
            const particleCount = 200;
            const geometry = new THREE.SphereGeometry(1, 16, 16);
            
            for (let i = 0; i < particleCount; i++) {
                const isElite = i < particleCount * 0.2; // 20% are AI adopters
                const material = new THREE.MeshPhongMaterial({
                    color: isElite ? 0x667eea : 0x764ba2,
                    emissive: isElite ? 0x667eea : 0x764ba2,
                    emissiveIntensity: 0.2,
                    transparent: true,
                    opacity: 0.8
                });
                
                const mesh = new THREE.Mesh(geometry, material);
                mesh.position.set(
                    (Math.random() - 0.5) * 50,
                    (Math.random() - 0.5) * 20,
                    (Math.random() - 0.5) * 50
                );
                mesh.castShadow = true;
                mesh.receiveShadow = true;
                
                particles.push({
                    mesh: mesh,
                    isElite: isElite,
                    velocity: new THREE.Vector3(
                        (Math.random() - 0.5) * 0.1,
                        isElite ? 0.5 : -0.1,
                        (Math.random() - 0.5) * 0.1
                    ),
                    baseY: mesh.position.y
                });
                
                threeScene.add(mesh);
            }
            
            // Add grid
            const gridHelper = new THREE.GridHelper(200, 20, 0xcccccc, 0xeeeeee);
            gridHelper.position.y = -30;
            threeScene.add(gridHelper);
            
            // Controls
            const controls = new THREE.OrbitControls(threeCamera, threeRenderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.maxDistance = 300;
            controls.minDistance = 50;
            
            window.threeScene = threeScene;
            window.threeControls = controls;
        }
        
        function animate3D() {
            if (!window.threeScene) return;
            
            requestAnimationFrame(animate3D);
            animationFrame++;
            
            // Update year
            animationYear = 2024 + (animationFrame / 600) * 6; // 6 years over 600 frames
            if (animationYear > 2030) {
                animationFrame = 0;
                animationYear = 2024;
            }
            
            // Calculate gap
            const yearProgress = (animationYear - 2024) / 6;
            const gapMultiplier = 1.5 * Math.exp(yearProgress * 1.5);
            
            // Update particles
            particles.forEach(p => {
                if (p.isElite) {
                    // AI adopters rise exponentially
                    p.mesh.position.y = p.baseY + Math.exp(yearProgress * 2) * 20;
                    p.mesh.scale.setScalar(1 + yearProgress * 2);
                    // Cluster together
                    p.mesh.position.x *= 0.99;
                    p.mesh.position.z *= 0.99;
                } else {
                    // Others sink slowly
                    p.mesh.position.y = p.baseY - yearProgress * 10;
                    p.mesh.scale.setScalar(1 - yearProgress * 0.3);
                    // Spread apart
                    p.mesh.position.x *= 1.01;
                    p.mesh.position.z *= 1.01;
                }
                
                // Add some movement
                p.mesh.position.add(p.velocity);
                p.mesh.rotation.y += 0.01;
            });
            
            // Update UI
            document.getElementById('year3d').textContent = animationYear.toFixed(1);
            document.getElementById('gap3d').textContent = gapMultiplier.toFixed(1) + 'x';
            document.getElementById('speed3d').textContent = 
                yearProgress < 0.3 ? 'Gradual' :
                yearProgress < 0.6 ? 'Accelerating' :
                'Exponential';
            
            // Render
            if (window.threeControls) window.threeControls.update();
            threeRenderer.render(threeScene, threeCamera);
        }
        
        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && window.threeScene) {
                animationFrame = 0;
                particles.forEach(p => {
                    p.mesh.position.y = p.baseY;
                    p.mesh.scale.setScalar(1);
                });
            }
        });
        
        // Initialize on load
        window.onload = function() {
            // Check if returning visitor
            if (localStorage.getItem('visited')) {
                skipTour();
            }
            localStorage.setItem('visited', 'true');
            
            // Initialize default tab
            showTab('see');
        };
    </script>
</body>
</html>